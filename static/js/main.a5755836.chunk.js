(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){e.exports=a.p+"static/media/menu.7d88ba55.svg"},176:function(e,t,a){e.exports=a(372)},181:function(e,t,a){},184:function(e,t,a){},218:function(e,t,a){},350:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){},365:function(e,t,a){},366:function(e,t,a){},372:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(35),o=a.n(l),i=(a(181),a(9)),c=a(10),s=a(13),u=a(11),m=a(12),h=a(385),p=a(388),d=a(175),b=a(386),f=(a(182),a(183),a(374)),E=a(107),v=a.n(E),g=(a(184),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{id:"sidebar",className:this.props.sidebarOpen?"open":""},r.a.createElement("h2",{className:"app-title"},"Servant"),r.a.createElement(v.a,{as:"ul"},r.a.createElement(v.a.Item,{as:"li",className:"sidebar-link"},r.a.createElement(f.a,{to:"/jobs"},"Jobs"))))}}]),t}(n.Component)),j=a(163),C=a.n(j),x=a(384),y=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(x.a,{bg:"light",expand:"lg"},r.a.createElement("a",{className:"navbar-toggle",onClick:this.props.onToggleSidebar},r.a.createElement("img",{src:C.a,className:"menu-icon",alt:"Toggle sidebar"})))}}]),t}(n.Component),O=a(8),k=a.n(O),w=a(14),V=a(167),_=a.n(V),T=a(376),S=a(377),J=a(166),D=a(378),B=a(379);function N(e,t){return q.apply(this,arguments)}function q(){return(q=Object(w.a)(k.a.mark(function e(t,a){var n,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(n=e.sent,L(n)){e.next=7;break}throw(r=new Error("HTTP response code not 200")).status=n.status,r;case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var L=function(e){return e.status>=200&&e.status<=299};function I(e,t){return G.apply(this,arguments)}function G(){return(G=Object(w.a)(k.a.mark(function e(t,a){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e,t){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(k.a.mark(function e(t,a){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e,t){return M.apply(this,arguments)}function M(){return(M=Object(w.a)(k.a.mark(function e(t,a){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e){return F.apply(this,arguments)}function F(){return(F=Object(w.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e){var t=!1;return{result:new Promise(function(a,n){e.then(function(e){t||a(e)}).catch(function(e){t||n(e)})}),cancel:function(){return t=!0}}}var H=a(58),z=a.n(H),Q="https://crowdai-servant-api-dev.herokuapp.com",$="invalid_job_data";function Y(e){return e.created_at=new Date(e.created_at),e.updated_at=new Date(e.updated_at),e.deleted_ad=new Date(e.deleted_ad),e.data.max_votes=e.data.maxVotes,e.data.num_votes=e.data.numVotes,delete e.data.maxVotes,delete e.data.numVotes,e.data.design?e.data.design.forEach(function(e){e.id=e.id||z()(),e.valid=!0}):e.data.design=[],e}function K(e){return e.data.maxVotes=e.data.max_votes,e.data.numVotes=e.data.num_votes,delete e.data.max_votes,delete e.data.num_votes,e}var X={getJobs:function(){var e=Object(w.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("".concat(Q,"/jobs"));case 2:return t=e.sent,e.abrupt("return",t.map(Y));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getJob:function(){var e=Object(w.a)(k.a.mark(function e(t){var a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("".concat(Q,"/jobs/").concat(t));case 2:return a=e.sent,e.abrupt("return",Y(a));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createJob:function(){var e=Object(w.a)(k.a.mark(function e(t){var a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=K(t),e.next=3,R("".concat(Q,"/jobs"),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateJob:function(){var e=Object(w.a)(k.a.mark(function e(t){var a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=K(t),e.next=4,P("".concat(Q,"/jobs/").concat(t.id),a);case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(0),400!==e.t0.response){e.next=13;break}throw new Error($);case 13:throw e.t0;case 14:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),deleteJob:function(){var e=Object(w.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("".concat(Q,"/jobs/").concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),publish:function(){var e=Object(w.a)(k.a.mark(function e(t,a){var n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("".concat(Q,"/jobs/").concat(t.id,"/publish"),{platform:a});case 2:return n=e.sent,e.abrupt("return",Y(n));case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},Z=a(15),ee=a(383),te=a(375),ae=function(e,t){return function(){e.setState({show:!1}),setTimeout(t,100)}},ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={show:!0},a.onCancelPressed=ae(Object(Z.a)(Object(Z.a)(a)),function(){return a.props.onCancel()}),a.onConfirmPressed=ae(Object(Z.a)(Object(Z.a)(a)),function(){return a.props.onConfirmDeletion()}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.jobToDelete;return r.a.createElement(ee.a,{show:this.state.show},r.a.createElement(ee.a.Header,null,r.a.createElement(ee.a.Title,null,"Delete job ",r.a.createElement("span",{className:"job-id"},"#",e.id))),r.a.createElement(ee.a.Body,null,'Are you sure you want to delete "',r.a.createElement("strong",null,e.data.name),'"?'),r.a.createElement(ee.a.Footer,null,r.a.createElement(te.a,{variant:"secondary",onClick:this.onCancelPressed},"Cancel"),r.a.createElement(te.a,{variant:"danger",onClick:this.onConfirmPressed},"Delete")))}}]),t}(n.Component),re=(a(218),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.componentDidMount=function(){return a.fetchJobs()},a.componentWillUnmount=function(){return a.pendingJobsRequest.cancel()},a.onUserWantToDeleteJob=function(e){return a.setState({jobToDelete:e})},a.onOpenJobView=function(e){return a.props.history.push("/jobs/".concat(e.id))},a.onOpenEditJob=function(e){return a.props.history.push("/jobs/".concat(e.id,"/edit"))},a.onUserConfirmDeletion=Object(w.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.jobToDelete,a.setState({jobs:null,jobToDelete:null}),e.next=4,X.deleteJob(t);case 4:return e.next=6,a.fetchJobs();case 6:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"fetchJobs",value:function(){var e=Object(w.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.pendingJobsRequest=W(X.getJobs()),e.next=4,this.pendingJobsRequest.result;case 4:t=e.sent,this.setState({jobs:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({jobs:null,fetchError:!0});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(T.a,null,this.state.jobToDelete&&r.a.createElement(ne,{jobToDelete:this.state.jobToDelete,onCancel:function(){return e.setState({jobToDelete:null})},onConfirmDeletion:this.onUserConfirmDeletion}),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement("h2",null,"List")),r.a.createElement(J.a,{className:"d-flex flex-row-reverse"},r.a.createElement("div",null,r.a.createElement(_.a,{to:"/jobs/new",className:"btn btn-primary"},"Add")))),r.a.createElement(S.a,null,!this.state.jobs&&!this.state.fetchError&&r.a.createElement(le,null),!this.state.jobs&&this.state.fetchError&&r.a.createElement(ie,null),this.state.jobs&&0===this.state.jobs.length&&r.a.createElement(oe,null),this.state.jobs&&this.state.jobs.length>0&&r.a.createElement(ce,{jobs:this.state.jobs,onUserWantToDeleteJob:this.onUserWantToDeleteJob,onOpenJobView:this.onOpenJobView,onOpenEditJob:this.onOpenEditJob})))}}]),t}(n.Component)),le=function(){return r.a.createElement(J.a,null,r.a.createElement("p",null,"Fetching jobs ..."))},oe=function(){return r.a.createElement(J.a,null,r.a.createElement("p",null,"You haven't created any jobs yet. Use the 'Add' button to create a new one"))},ie=function(){return r.a.createElement(J.a,null,r.a.createElement(T.a,null,r.a.createElement(D.a,{variant:"danger"},"There's been an error while fetching the jobs")))},ce=function(e){var t=e.jobs,a=e.onUserWantToDeleteJob,n=e.onOpenJobView,l=e.onOpenEditJob;return r.a.createElement(J.a,null,r.a.createElement("h1",null,"Jobs"),r.a.createElement(B.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Platforms"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement(ue,{job:e,key:e.id,onUserWantToDeleteJob:a,onOpenEditJob:l,onOpenJobView:n})}))))},se=function(e){return function(t){t.stopPropagation(),e()}},ue=function(e){var t=e.job,a=e.onUserWantToDeleteJob,n=e.onOpenJobView,l=e.onOpenEditJob;return r.a.createElement("tr",{onClick:function(){return n(t)},className:"clickable-row"},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.data.name),r.a.createElement("td",null,t.data.description),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("a",{className:"icon-button",onClick:se(function(){return l(t)})},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("a",{className:"icon-button",onClick:se(function(){return a(t)})},r.a.createElement("i",{className:"fas fa-trash-alt"}))))},me=a(382),he=a(380),pe=a(381),de=a(174),be=a(22),fe=a(82),Ee=function(e){return"".concat(e/100)},ve=function(e){return Math.floor(100*e)},ge=(a(350),a(171)),je=a.n(ge),Ce=(a(361),a(387)),xe=(a(362),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleBlockDataChange=function(e){return function(t){var n=a.props.blocksList;n[e]=t,a.props.onChange(n)}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Ce.a,null,r.a.createElement(Ce.a.Header,null,this.props.title),r.a.createElement(Ce.a.Body,null,r.a.createElement("div",{className:"blocks-container",ref:this.props.componentsContainerRef},this.props.blocksList.map(function(t,a){var n=e.props.blockDefinitionsMap[t.type],l=t.id||a;if(n){var o=n.Component;return r.a.createElement(o,{key:l,data:t,onChange:e.handleBlockDataChange(a),expandable:e.props.expandable})}return r.a.createElement(ye,{key:l,type:t.type})}))))}}]),t}(n.Component)),ye=function(e){var t=e.type;return r.a.createElement("p",null,"Can't render component of type ",t)},Oe=a(164),ke=(a(363),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).toggleExpansion=function(){return a.setState(function(e){return{expanded:!e.expanded}},function(){return a.props.onToggleExpansion(a.state.expanded)})},a.state={expanded:e.expanded},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Ce.a,{className:"block-card","data-block-type":this.props.type,"data-block-id":this.props.id},r.a.createElement(Ce.a.Header,null,this.props.expandable&&r.a.createElement("a",{onClick:this.toggleExpansion},!1===this.props.valid&&r.a.createElement("i",{className:"fas fa-exclamation-triangle"}),this.props.title,r.a.createElement("i",{className:"fas fa-caret-down ".concat(this.state.expanded?"expanded":"collapsed")})),!this.props.expandable&&this.props.title),r.a.createElement(Oe.a,{in:this.state.expanded},r.a.createElement("div",null,r.a.createElement(Ce.a.Body,null,this.props.children))))}}]),t}(n.Component)),we=a(81),Ve=a(50),_e=function(e){return function(t){var a=t.target;e.setState(Object(Ve.a)({},a.name,a.value))}},Te=function(e){return function(t){var a=t.target;e.setState(Object(Ve.a)({},a.name,a.checked),function(){return Be(e)})}},Se=function(e){return function(t){var a=t.target;e.setState(Object(Ve.a)({},a.name,a.value),function(){return Be(e)})}},Je=function(e){return function(){return Be(e)}},De=function(e){return function(t){return e.setState({expanded:t},function(){return e.props.onChange(e.state)})}},Be=function(e){return e.setState({valid:e.validate()},function(){return e.props.onChange(e.state)})},Ne=function(e,t){var a=e.data;return Object(we.a)({id:a.id,type:a.type,expanded:a.expanded||!1,valid:a.valid||!1},t)},qe={blockTypeName:"input_dynamic_text",Component:function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validate=function(){var e=a.state;return""!==e.csvVariable&&""!==e.csvTitleVariable&&!(e.highlightable&&(""===e.question||""===e.highlightedCsvVariable))},a.onChangeHighlightable=function(e){return a.setState({highlightable:e.target.checked},function(){return a.props.onChange(a.state)})},a.state=Ne(e,{csvVariable:e.data.csvVariable||"",csvTitleVariable:e.data.csvTitleVariable||"",highlightable:e.data.highlightable||!1,question:e.data.question||"",highlightedCsvVariable:e.data.highlightedCsvVariable||""}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ke,Object.assign({},this.state,{onToggleExpansion:De(this),title:"Input Dynamic Text",type:"input_dynamic_text",expandable:this.props.expandable}),r.a.createElement(S.a,null,r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"CSV Title Variable"),r.a.createElement(me.a.Control,{name:"csvTitleVariable",type:"text",value:this.state.csvTitleVariable,onChange:_e(this),onBlur:Je(this)}))),r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"CSV Variable"),r.a.createElement(me.a.Control,{name:"csvVariable",type:"text",value:this.state.csvVariable,onChange:_e(this),onBlur:Je(this)})))),r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Check,{type:"checkbox",name:"highlightable",label:"Enable text highlighting",checked:this.state.highlightable,onChange:this.onChangeHighlightable})),this.state.highlightable&&r.a.createElement(S.a,null,r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Question"),r.a.createElement(me.a.Control,{name:"question",type:"text",value:this.state.question,onChange:_e(this),onBlur:Je(this)}))),r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Highlighted CSV Variable"),r.a.createElement(me.a.Control,{name:"highlightedCsvVariable",type:"text",value:this.state.highlightedCsvVariable,onChange:_e(this),onBlur:Je(this)})))))}}]),t}(n.Component)},Le={blockTypeName:"input_static_text",Component:function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validate=function(){return!0},a.handleEditorChange=function(e){return a.props.onChange(Object(we.a)({},a.state,{text:e}))},a.state=Ne(e,{text:e.data.text||"",valid:!0}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ke,Object.assign({},this.state,{onToggleExpansion:De(this),title:"Input Static Text",type:"input_static_text",expandable:this.props.expandable}),r.a.createElement(me.a.Group,null,r.a.createElement(fe.a,{onEditorChange:this.handleEditorChange,initialValue:this.props.data.text,init:{menubar:!1}})))}}]),t}(n.Component)},Ie={blockTypeName:"output_open_question",Component:function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validate=function(){return""!==a.state.csvVariable&&""!==a.state.question},a.state=Ne(e,{question:e.data.question||"",csvVariable:e.data.csvVariable||"",required:e.data.required||!1,size:e.data.size||"slim"}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ke,Object.assign({onToggleExpansion:De(this)},this.state,{title:"Output Open Question",type:"output_open_question",expandable:this.props.expandable}),r.a.createElement(S.a,null,r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Question"),r.a.createElement(me.a.Control,{name:"question",type:"text",value:this.state.question,onChange:_e(this),onBlur:Je(this)}))),r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"CSV Variable"),r.a.createElement(me.a.Control,{name:"csvVariable",type:"text",value:this.state.csvVariable,onChange:_e(this),onBlur:Je(this)})))),r.a.createElement(S.a,null,r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Check,{type:"checkbox",name:"required",label:"Required",checked:this.state.required,onChange:Te(this)}))),r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Text field size"),r.a.createElement(me.a.Control,{as:"select",name:"size",onChange:Se(this),value:this.state.size},r.a.createElement("option",{value:"slim"},"Slim"),r.a.createElement("option",{value:"big"},"Big"))))))}}]),t}(n.Component)},Ge=[{label:"Multiple choice</",value:"multiple_checkbox"},{label:"Single choice radio",value:"single_radio"},{label:"Single choice dropdown",value:"single_dropdown"}],Re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChoicesChanged=function(e){return a.setState({choices:e},function(){return a.props.onChange(a.state)})},a.validate=function(){var e=a.state;return""!==e.csvVariable&&""!==e.csvTitleVariable&&0!==e.choices.length},a.state=Ne(e,{question:e.data.question||"",choices:e.data.choices||[],csvVariable:e.data.csvVariable||"",required:e.data.required||!1,choice_type:e.data.choice_type||"multiple_checkbox"}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ke,Object.assign({onToggleExpansion:De(this)},this.state,{title:"Output Choices",type:"output_choices",expandable:this.props.expandable}),r.a.createElement(me.a.Row,null,r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Question"),r.a.createElement(me.a.Control,{name:"question",type:"text",value:this.state.question,onChange:_e(this),onBlur:Je(this)}))),r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"CSV Variable"),r.a.createElement(me.a.Control,{name:"csvVariable",type:"text",value:this.state.csvVariable,onChange:_e(this),onBlur:Je(this)})))),r.a.createElement(me.a.Row,null,r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Check,{type:"checkbox",name:"required",label:"Required",checked:this.state.required,onChange:Te(this)}))),r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Choice type"),r.a.createElement(me.a.Control,{as:"select",name:"choice_type",onChange:Se(this),value:this.state.choice_type},Ge.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),r.a.createElement(Ae,{choices:this.state.choices,onChange:this.onChoicesChanged}))}}]),t}(n.Component),Ae=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={newLabel:"",newValue:""},a.onAddChoice=function(){var e=a.props.choices;e.push({label:a.state.newLabel,value:a.state.newValue}),a.setState({newLabel:"",newValue:""},function(){return a.props.onChange(e)})},a.onRemoveChoice=function(e){var t=a.props.choices;t.splice(e,1),a.props.onChange(t)},a.isNewChoiceValid=function(){return""!==a.state.newLabel.trim()&&""!==a.state.newValue.trim()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h5",null,"Choices"),r.a.createElement("hr",null),r.a.createElement(B.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Label"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.props.choices.map(function(t,a){return r.a.createElement("tr",{key:t.value},r.a.createElement("td",null,t.label),r.a.createElement("td",null,t.value),r.a.createElement("td",null,r.a.createElement("a",{className:"icon-button",onClick:function(){return e.onRemoveChoice(a)}},r.a.createElement("i",{className:"fas fa-trash-alt"}))))}))),r.a.createElement(me.a.Row,null,r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Label"),r.a.createElement(me.a.Control,{name:"newLabel",type:"text",value:this.state.newLabel,onChange:_e(this)}))),r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Value"),r.a.createElement(me.a.Control,{name:"newValue",type:"text",value:this.state.newValue,onChange:_e(this)}))),r.a.createElement(J.a,{md:"12",className:""},r.a.createElement(te.a,{onClick:this.onAddChoice,disabled:!this.isNewChoiceValid()},"Add"))))}}]),t}(n.Component),Pe={blockTypeName:"output_choices",Component:Re},Me=function(e){var t={};return e.forEach(function(e){return t[e.blockTypeName]=e}),t}([qe,Le,{blockTypeName:"input_dynamic_image",Component:function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validate=function(){var e=a.state;return""!==e.csvVariable&&!(e.highlightable&&(""===e.question||""===e.highlightedCsvVariable))},a.onChangeHighlightable=function(e){return a.setState({highlightable:e.target.checked},function(){return a.props.onChange(a.state)})},a.state=Ne(e,{csvVariable:e.data.csvVariable||"",highlightable:e.data.highlightable||!1,question:e.data.question||"",highlightedCsvVariable:e.data.highlightedCsvVariable||""}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ke,Object.assign({},this.state,{onToggleExpansion:De(this),title:"Input Dynamic Image",type:"input_dynamic_image",expandable:this.props.expandable}),r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"CSV Variable"),r.a.createElement(me.a.Control,{name:"csvVariable",type:"text",value:this.state.csvVariable,onChange:_e(this),onBlur:Je(this)})),r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Check,{type:"checkbox",name:"highlightable",label:"Enable image highlighting",checked:this.state.highlightable,onChange:this.onChangeHighlightable})),this.state.highlightable&&r.a.createElement(S.a,null,r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Question"),r.a.createElement(me.a.Control,{name:"question",type:"text",value:this.state.question,onChange:_e(this),onBlur:Je(this)}))),r.a.createElement(J.a,{md:"12",lg:"6"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Highlighted CSV Variable"),r.a.createElement(me.a.Control,{name:"highlightedCsvVariable",type:"text",value:this.state.highlightedCsvVariable,onChange:_e(this),onBlur:Je(this)})))))}}]),t}(n.Component)},Ie,Pe]),Ue=Object.keys(Me).map(function(e){return{type:e}}),Fe=function(e,t){for(var a=0;a<t.children.length;a++)if(t.children[a]===e)return a;return-1},We=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.setupDragula()},a.setupDragula=function(){var e=a.toolsBlocksRef.current,t=a.designBlocksRef.current,n=[a.toolsBlocksRef.current,a.designBlocksRef.current];a.drake=je()(n,{copy:function(t,a){return a===e},accepts:function(e,a){return a===t},removeOnSpill:!0}),a.drake.on("drop",function(n,r,l,o){if(r===t){var i=Fe(o,t);l===e?a.onBlockAdded(n,i):a.onBlockSorted(n,i)}}),a.drake.on("remove",function(e,t){t.appendChild(e);var n=e.getAttribute("data-block-id");a.removeBlockDataByIdAndNotify(n)})},a.onBlockAdded=function(e,t){a.assertNextSiblingIndexIsValidGivenInitialBlocks(t);var n=a.getNewBlockIndexGivenNextSiblingIndex(t),r=a.buildNewBlockDataGivenClonedElement(e);a.addBlockDataToTheDesignAndNotify(r,n),e.parentNode.removeChild(e)},a.onBlockSorted=function(e,t){a.assertNextSiblingIndexIsValidGivenInitialBlocks(t);var n=a.getMovedBlockIndex(e),r=a.getBlockIndexGivenNextSiblingIndex(t);a.swapBlockDataAndNotify(n,r)},a.assertNextSiblingIndexIsValidGivenInitialBlocks=function(e){if(0===e||e>a.props.initialBlocks.length)throw new Error("invalid nextSiblingIndex given the current blocks array")},a.getNewBlockIndexGivenNextSiblingIndex=function(e){return-1===e?a.props.initialBlocks.length:e-1},a.getBlockIndexGivenNextSiblingIndex=function(e){return-1===e?a.props.initialBlocks.length-1:e-1},a.buildNewBlockDataGivenClonedElement=function(e){return{type:e.getAttribute("data-block-type"),id:z()(),expanded:!0,valid:!0}},a.getMovedBlockIndex=function(e){var t=a.props.initialBlocks,n=e.getAttribute("data-block-id");return t.findIndex(function(e){return e.id===n})},a.addBlockDataToTheDesignAndNotify=function(e,t){var n=a.props.initialBlocks;n.splice(t,0,e),a.props.onChange(n)},a.swapBlockDataAndNotify=function(e,t){var n=a.props.initialBlocks,r=n[e];n[e]=n[t],n[t]=r,a.props.onChange(n)},a.removeBlockDataByIdAndNotify=function(e){var t=a.props.initialBlocks,n=t.findIndex(function(t){return t.id===e});t.splice(n,1),a.props.onChange(t)},a.toolsBlocksRef=r.a.createRef(),a.designBlocksRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(S.a,null,r.a.createElement(J.a,{md:"6",lg:"4"},r.a.createElement(xe,{componentsContainerRef:this.toolsBlocksRef,title:"Available blocks",blockDefinitionsMap:Me,blocksList:Ue,expandable:!1})),r.a.createElement(J.a,{md:"6",lg:"8"},r.a.createElement(xe,{componentsContainerRef:this.designBlocksRef,title:"Your job design",blockDefinitionsMap:Me,blocksList:this.props.initialBlocks,expandable:!0,onChange:function(t){return e.props.onChange(t)}})))}}]),t}(n.Component),He=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e,t){if(a.state.designValid){var n=a.valuesToJobData(e);a.props.onSubmit(n,t)}},a.handleEditorChange=function(e){return a._instructions=e},a.valuesToJobData=function(e){return{name:e.name,description:e.description,num_votes:e.num_votes,max_votes:e.max_votes,reward:ve(e.reward),items_csv:e.items_csv,items_gold_csv:e.items_gold_csv,instructions:a._instructions,design:a.state.design}},a.jobDataToValues=function(e){var t=e||{};return{name:t.name||"",description:t.description||"",num_votes:t.num_votes||3,max_votes:t.max_votes||10,reward:t.reward&&Ee(t.reward)||.01,items_csv:t.items_csv||"",items_gold_csv:t.items_gold_csv||"",instructions:t.instructions||""}},a.validationSchema=be.object().shape({name:be.string().required("Name is required"),description:be.string().required("Description is required"),num_votes:be.number().required("Num votes must be a number").integer("Must be an integer").positive("Must be positive"),max_votes:be.number().required("Max votes must be a number").integer("Must be an integer").positive("Must be positive"),reward:be.number("").required("Reward must be a number").min(.1,"Must be greater than 0.1$").positive("Must be positive"),items_csv:be.string().required("URL of CSV of items is required").url("Must be a valid URL"),items_gold_csv:be.string().required("URL of CSV of gold items is required").url("Must be a valid URL"),instructions:be.string(),html:be.string(),css:be.string(),js:be.string()}),a.onDesignChanged=function(e){var t=a.isDesignValid();a.setState({designValid:t,design:e})},a.isDesignValid=function(){return null==a.state.design.find(function(e){return!e.valid})},a.state={design:e.jobData&&e.jobData.design||[]},a.state.designValid=a.isDesignValid(),a._instructions=e.jobData&&e.jobData.instructions||"",a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(de.a,{initialValues:this.jobDataToValues(this.props.jobData),onSubmit:this.handleSubmit,validationSchema:this.validationSchema},function(t){var a=t.handleSubmit,n=t.handleChange,l=t.handleBlur,o=t.values,i=t.touched,c=t.errors,s=function(e){return i[e]&&!c[e]},u=function(e){return i[e]&&c[e]};return r.a.createElement(me.a,{onSubmit:a,noValidate:!0},r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Job name"),r.a.createElement(me.a.Control,{name:"name",type:"text",value:o.name,onChange:n,onBlur:l,placeholder:"Ex: classify category of papers",isInvalid:u("name"),isValid:s("name")}),r.a.createElement(me.a.Control.Feedback,{type:"invalid"},c.name)))),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Job description"),r.a.createElement(me.a.Control,{name:"description",value:o.description,as:"textarea",rows:"3",onChange:n,onBlur:l,isInvalid:u("description"),isValid:s("description")}),r.a.createElement(me.a.Control.Feedback,{type:"invalid"},c.description)))),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Path to CSV file"),r.a.createElement(me.a.Control,{name:"items_csv",type:"text",value:o.items_csv,onChange:n,onBlur:l,isInvalid:u("items_csv"),isValid:s("items_csv"),placeholder:"Ex: https://raw.githubusercontent.com/..."}),r.a.createElement(me.a.Control.Feedback,{type:"invalid"},c.items_csv)))),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Path to GOLD CSV file"),r.a.createElement(me.a.Control,{name:"items_gold_csv",type:"text",value:o.items_gold_csv,onChange:n,onBlur:l,isInvalid:u("items_gold_csv"),isValid:s("items_gold_csv"),placeholder:"Ex: https://raw.githubusercontent.com/..."}),r.a.createElement(me.a.Control.Feedback,{type:"invalid"},c.items_gold_csv)))),r.a.createElement(S.a,null,r.a.createElement(J.a,{xs:"12",sm:"4"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Votes for item"),r.a.createElement(me.a.Control,{type:"number",name:"num_votes",value:o.num_votes,onChange:n,isInvalid:u("num_votes"),isValid:s("num_votes")}),r.a.createElement(me.a.Control.Feedback,{type:"invalid"},c.num_votes))),r.a.createElement(J.a,{xs:"12",sm:"4"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Max votes per worker"),r.a.createElement(me.a.Control,{type:"number",step:"1",name:"max_votes",value:o.max_votes,onChange:n,isInvalid:u("max_votes"),isValid:s("max_votes")}),r.a.createElement(me.a.Control.Feedback,{type:"invalid"},c.max_votes))),r.a.createElement(J.a,{xs:"12",sm:"4"},r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Reward"),r.a.createElement(he.a,null,r.a.createElement(he.a.Prepend,null,r.a.createElement(he.a.Text,null,"$")),r.a.createElement(me.a.Control,{type:"number",step:"0.01",name:"reward",value:o.reward,onChange:n,isInvalid:u("reward"),isValid:s("reward")}),r.a.createElement(me.a.Control.Feedback,{type:"invalid"},c.reward))))),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement(me.a.Group,null,r.a.createElement(me.a.Label,null,"Instructions"),r.a.createElement(fe.a,{textareaName:"instructions",onEditorChange:e.handleEditorChange,initialValue:o.instructions,init:{menubar:!1}})))),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement(me.a.Label,null,"Design"),r.a.createElement(We,{initialBlocks:e.state.design,onChange:e.onDesignChanged}))),!e.state.designValid&&r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement(D.a,{variant:"danger"},"One or more blocks are not correctly configured."))),r.a.createElement(pe.a,{className:"form-buttons"},e.props.cancelText&&r.a.createElement(te.a,{variant:"secondary",onClick:e.props.onCancel,className:"cancel-job-form"},e.props.cancelText),r.a.createElement(te.a,{variant:"primary",type:"submit",className:"submit-job-form"},e.props.submitText)))}))}}]),t}(n.Component),ze=a(108),Qe=(a(364),function(e){var t=e.to,a=e.text;return r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement(ze.a,{to:t,className:"btn btn-outline-info back-button"},r.a.createElement("i",{className:"fas fa-arrow-left"})," ",a)))}),$e=function(e){function t(e,a){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleJobSubmission=function(){var e=Object(w.a)(k.a.mark(function e(t,a){var r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.setSubmitting)(!0),e.prev=2,e.next=5,X.createJob({data:t});case 5:n.redirectToJobsList(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0),n.onJobCreationFailed();case 12:r(!1);case 13:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,a){return e.apply(this,arguments)}}(),n.onJobCreationFailed=function(){return n.setState({creationError:!0})},n.redirectToJobsList=function(){return n.props.history.push("/jobs")},n.context=a,n.state={creationError:!1},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(T.a,null,r.a.createElement(Qe,{to:"/jobs",text:"Return to jobs list"}),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement("h1",null,"Create new job"))),this.state.creationError&&r.a.createElement(Ye,null),r.a.createElement(He,{onSubmit:this.handleJobSubmission,onCancel:this.onCancel,submitText:"Create"}))}}]),t}(n.Component),Ye=function(){return r.a.createElement(J.a,null,r.a.createElement(D.a,{variant:"danger"},"There's been an error while creating the job"))},Ke=(a(365),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.onUserWantsToPublish=function(e){return function(){return a.setState({publishOn:e})}},a.publish=Object(w.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.publishOn,a.setState({publishOn:null,isPublishing:!0}),e.next=4,X.publish(a.props.job,t);case 4:a.setState({isPublishing:!1,published:!0});case 5:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(T.a,{className:"publish-buttons"},r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement("h4",null,"Publish"))),this.state.publishOn&&r.a.createElement(Xe,{job:this.props.job,onCancel:function(){return e.setState({publishOn:null})},onConfirm:this.publish}),this.state.published&&r.a.createElement(Ze,{job:this.props.job}),r.a.createElement(S.a,null,r.a.createElement(J.a,{md:"4"},r.a.createElement(te.a,{onClick:this.onUserWantsToPublish("MTurk"),block:!0},"Amazon Mechanical Turk")),r.a.createElement(J.a,{md:"4"},r.a.createElement(te.a,{onClick:this.onUserWantsToPublish("F8"),block:!0},"Figure Eight")),r.a.createElement(J.a,{md:"4"},r.a.createElement(te.a,{onClick:this.onUserWantsToPublish("Toloka"),block:!0},"Yandex.Toloka"))))}}]),t}(n.Component)),Xe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={show:!0},a.onCancelPressed=ae(Object(Z.a)(Object(Z.a)(a)),function(){return a.props.onCancel()}),a.onConfirmPressed=ae(Object(Z.a)(Object(Z.a)(a)),function(){return a.props.onConfirm()}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.job;return r.a.createElement(ee.a,{show:this.state.show},r.a.createElement(ee.a.Header,null,r.a.createElement(ee.a.Title,null,"Publish job ",r.a.createElement("span",{className:"job-id"},"#",e.id))),r.a.createElement(ee.a.Body,null,'Are you sure you want to publish "',r.a.createElement("strong",null,e.data.name),'"?'),r.a.createElement(ee.a.Footer,null,r.a.createElement(te.a,{variant:"secondary",onClick:this.onCancelPressed},"Cancel"),r.a.createElement(te.a,{variant:"primary",onClick:this.onConfirmPressed},"Publish")))}}]),t}(n.Component),Ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={show:!0},a.onClose=ae(Object(Z.a)(Object(Z.a)(a)),function(){}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.job;return r.a.createElement(ee.a,{show:this.state.show},r.a.createElement(ee.a.Header,null,r.a.createElement(ee.a.Title,null,"Job #",e.id," published")),r.a.createElement(ee.a.Body,null,'Job "',r.a.createElement("strong",null,e.data.name),'" was published!'),r.a.createElement(ee.a.Footer,null,r.a.createElement(te.a,{variant:"primary",onClick:this.onClose},"Close")))}}]),t}(n.Component),et=function(e){return e.props.history.push("/jobs")},tt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.componentDidMount=function(){return a.fetchJob()},a.componentWillUnmount=function(){return a.pendingJobRequest.cancel()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"fetchJob",value:function(){var e=Object(w.a)(k.a.mark(function e(){var t,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,this.pendingJobRequest=W(X.getJob(t)),e.next=5,this.pendingJobRequest.result;case 5:a=e.sent,this.setState({job:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),et(this);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.job?r.a.createElement(T.a,null,r.a.createElement(S.a,null,r.a.createElement(nt,{job:this.state.job})),r.a.createElement("hr",null),r.a.createElement(S.a,null,r.a.createElement(Ke,{job:this.state.job}))):r.a.createElement(at,null)}}]),t}(n.Component),at=function(){return r.a.createElement(T.a,null,r.a.createElement("p",null,"Fetching ..."))};function nt(e){var t=e.job;return r.a.createElement(T.a,null,r.a.createElement(Qe,{to:"/jobs",text:"Return to jobs list"}),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement("h2",null,"Job #",t.id)),r.a.createElement(J.a,{className:"d-flex flex-row-reverse"},r.a.createElement("div",null,r.a.createElement(ze.a,{to:"/jobs/".concat(t.id,"/edit"),className:"btn btn-primary"},"Edit")))),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement("h2",null,t.data.name))),r.a.createElement(S.a,null,r.a.createElement(J.a,{md:"3",lg:"2"},r.a.createElement("strong",null,"Description:")),r.a.createElement(J.a,null,t.data.description)),r.a.createElement(S.a,null,r.a.createElement(J.a,{md:"3",lg:"2"},r.a.createElement("strong",null,"Reward:")),r.a.createElement(J.a,null,Ee(t.data.reward)," $")))}var rt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.fetchJob()},a.fetchJob=Object(w.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.getJob(a.state.id);case 3:t=e.sent,a.setState({job:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),et(Object(Z.a)(Object(Z.a)(a)));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),a.handleJobSubmission=function(){var e=Object(w.a)(k.a.mark(function e(t,n){var r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.setSubmitting)(!0),e.prev=2,e.next=5,X.updateJob({id:a.state.job.id,data:t});case 5:a.returnToJobPage(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.onUpdateJobFailed(e.t0);case 11:r(!1);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a.onCancel=function(){return a.returnToJobPage()},a.returnToJobPage=function(){return a.props.history.push("/jobs/".concat(a.state.job.id))},a.onUpdateJobFailed=function(e){return a.setState({updateError:e})},a.state={id:e.match.params.id},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(T.a,null,r.a.createElement(Qe,{to:"/jobs/".concat(this.state.id),text:"Cancel"}),r.a.createElement(S.a,null,r.a.createElement(J.a,null,r.a.createElement("h1",null,"Edit job ",this.state.job&&"#".concat(this.state.id)))),this.state.updateError&&r.a.createElement(ot,{error:this.state.updateError}),!this.state.job&&r.a.createElement(lt,null),this.state.job&&r.a.createElement(He,{jobData:this.state.job.data,onSubmit:this.handleJobSubmission,onCancel:this.onCancel,submitText:"Save"}))}}]),t}(n.Component);function lt(){return r.a.createElement("p",null,"Fetching job...")}var ot=function(e){var t=e.error;return r.a.createElement(J.a,null,r.a.createElement(D.a,{variant:"danger"},t===$?"Validation of the Job failer. Please check all the data":"There's been an error while creating the job"))},it=function(){return r.a.createElement(p.a,null,r.a.createElement(d.a,{path:"/jobs",exact:!0,component:re}),r.a.createElement(d.a,{path:"/jobs/new",component:$e}),r.a.createElement(d.a,{path:"/jobs/:id/edit",exact:!0,component:rt}),r.a.createElement(d.a,{path:"/jobs/:id",component:tt}))},ct=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sidebarOpen:!1},a.onToggleSidebar=function(){return a.setState(function(e){return{sidebarOpen:!e.sidebarOpen}})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement(g,{sidebarOpen:this.state.sidebarOpen}),r.a.createElement("div",{className:"content"},r.a.createElement(y,{onToggleSidebar:this.onToggleSidebar}),r.a.createElement(p.a,null,r.a.createElement(d.a,{path:"/jobs",component:it}),r.a.createElement(d.a,{render:function(){return r.a.createElement(b.a,{to:"/jobs"})}})))))}}]),t}(n.Component),st=(a(366),a(173)),ut=a.n(st);a(367),a(368),a(370);ut.a.init({selector:"#tiny",plugins:["paste","link"]});var mt=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ct,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[176,1,2]]]);
//# sourceMappingURL=main.a5755836.chunk.js.map