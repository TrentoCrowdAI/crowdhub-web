(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){e.exports=a.p+"static/media/menu.7d88ba55.svg"},175:function(e,t,a){e.exports=a(372)},180:function(e,t,a){},183:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},350:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){},365:function(e,t,a){},366:function(e,t,a){},372:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),i=a.n(l),o=(a(180),a(9)),c=a(10),s=a(13),u=a(11),m=a(12),h=a(388),d=a(389),p=a(174),b=a(386),E=(a(181),a(182),a(375)),f=a(107),g=a.n(f),v=(a(183),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{id:"sidebar",className:this.props.sidebarOpen?"open":""},r.a.createElement("h2",{className:"app-title"},"Servant"),r.a.createElement(g.a,{as:"ul"},r.a.createElement(g.a.Item,{as:"li",className:"sidebar-link"},r.a.createElement(E.a,{to:"/jobs"},"Jobs"))))}}]),t}(n.Component)),j=a(163),C=a.n(j),y=a(385),x=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,{bg:"light",expand:"lg"},r.a.createElement("button",{className:"navbar-toggle button-link",onClick:this.props.onToggleSidebar},r.a.createElement("img",{src:C.a,className:"menu-icon",alt:"Toggle sidebar"})))}}]),t}(n.Component),k=a(8),w=a.n(k),O=a(14),_=a(379),V=a(378),S=a(166),T=a(377),J=a(380);function N(e,t){return D.apply(this,arguments)}function D(){return(D=Object(O.a)(w.a.mark(function e(t,a){var n,r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(n=e.sent,B(n)){e.next=7;break}throw(r=new Error("HTTP response code not 200")).status=n.status,r;case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var B=function(e){return e.status>=200&&e.status<=299};function q(e,t){return L.apply(this,arguments)}function L(){return(L=Object(O.a)(w.a.mark(function e(t,a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t){return G.apply(this,arguments)}function G(){return(G=Object(O.a)(w.a.mark(function e(t,a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e,t){return R.apply(this,arguments)}function R(){return(R=Object(O.a)(w.a.mark(function e(t,a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e){return F.apply(this,arguments)}function F(){return(F=Object(O.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(e){var t=!1;return{result:new Promise(function(a,n){e.then(function(e){t||a(e)}).catch(function(e){t||n(e)})}),cancel:function(){return t=!0}}}var U=a(76),H=a.n(U),W="https://crowdai-servant-api-dev.herokuapp.com",z="invalid_job_data";function Y(e){return e.created_at=new Date(e.created_at),e.updated_at=new Date(e.updated_at),e.deleted_ad=new Date(e.deleted_ad),e.data.max_votes=e.data.maxVotes,e.data.num_votes=e.data.numVotes,delete e.data.maxVotes,delete e.data.numVotes,e.data.design?e.data.design.forEach(function(e){e.id=e.id||H()(),e.valid=!0}):e.data.design=[],e}function Q(e){return e.data.maxVotes=e.data.max_votes,e.data.numVotes=e.data.num_votes,delete e.data.max_votes,delete e.data.num_votes,e}var $={getJobs:function(){var e=Object(O.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("".concat(W,"/jobs"));case 2:return t=e.sent,e.abrupt("return",t.map(Y));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getJob:function(){var e=Object(O.a)(w.a.mark(function e(t){var a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("".concat(W,"/jobs/").concat(t));case 2:return a=e.sent,e.abrupt("return",Y(a));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createJob:function(){var e=Object(O.a)(w.a.mark(function e(t){var a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Q(t),e.next=3,I("".concat(W,"/jobs"),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateJob:function(){var e=Object(O.a)(w.a.mark(function e(t){var a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Q(t),e.next=4,P("".concat(W,"/jobs/").concat(t.id),a);case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(0),400!==e.t0.response){e.next=13;break}throw new Error(z);case 13:throw e.t0;case 14:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),deleteJob:function(){var e=Object(O.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("".concat(W,"/jobs/").concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),publish:function(){var e=Object(O.a)(w.a.mark(function e(t,a){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("".concat(W,"/jobs/").concat(t.id,"/publish"),{platform:a});case 2:return n=e.sent,e.abrupt("return",Y(n));case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},K=a(384),X=a(376),Z=function(e){var t=e.show,a=e.jobToDelete,n=e.onCancel,l=e.onConfirmDeletion;return r.a.createElement(K.a,{show:t},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Title,null,"Delete job ",r.a.createElement("span",{className:"job-id"},"#",t&&a.id))),r.a.createElement(K.a.Body,null,'Are you sure you want to delete "',r.a.createElement("strong",null,t&&a.data.name),'"?'),r.a.createElement(K.a.Footer,null,r.a.createElement(X.a,{variant:"secondary",onClick:n},"Cancel"),r.a.createElement(X.a,{variant:"danger",onClick:l},"Delete")))},ee=(a(217),a(108)),te=a(387),ae={text_highlighting:{name:"Text Highlighting",description:"Show text to users and ask them questions about it. Users will be able to highlight the text to answer the questions.",design:[{type:"input_dynamic_text",question:"Select which phrase best summarizes the abstract",csvVariable:"abstract",highlightable:!0,csvTitleVariable:"title",highlightedCsvVariable:"highlighted_parts"},{type:"output_choices",question:"Does the paper describe a study that involves older adults?",choices:[{label:"Yes",value:"Yes"},{label:"No",value:"No"},{label:"Maybe",value:"Maybe"}],required:!0,choice_type:"single_radio",csvVariable:"in_out_radio"},{size:"big",type:"output_open_question",question:"Explain your decision.",required:!1,csvVariable:"decision_explaination"}]},image_classification:{name:"Image Classification",description:"Show images to users and ask them to answer to a multiple choice question.",design:[{type:"input_dynamic_image",csvVariable:"image_url",highlightable:!1},{type:"output_choices",choices:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],question:"Does this image contain a cat?",required:!0,choice_type:"single_radio",csvVariable:"cat_radio"}]},image_highlighting:{name:"Image Highlighting",description:"Show images to users and ask them to highlight portion of the images to answer a question.",design:[{type:"input_dynamic_image",question:"Select the person in the photo.",csvVariable:"image_url",highlightable:!0,highlightedCsvVariable:"annotation"}]},blank:{name:"Blank",description:"Design from scratch the design of your Job to mix different type of questions as you like.",design:[]}};Object.values(ae).forEach(function(e){e.design.forEach(function(e){e.valid=!0,e.expanded=!0})});var ne=ae,re=(a(218),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showModal:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(le,{show:this.state.showModal,onCancel:function(){return e.setState({showModal:!1})}}),r.a.createElement(X.a,{onClick:function(){return e.setState({showModal:!0})}},"New"))}}]),t}(n.Component)),le=function(e){var t=e.show,a=e.onCancel;return r.a.createElement(K.a,{show:t,size:"lg"},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Title,null,"Create a new Job")),r.a.createElement(K.a.Body,null,"You are creating a new Job. Select a template to start with:",r.a.createElement(T.a,{className:"mt-1",variant:"primary"},r.a.createElement("i",{className:"fas fa-info-circle mr-2"}),"You can always edit the job design and CSV variable names later."),r.a.createElement(V.a,null,Object.keys(ne).map(function(e){var t=ne[e];return r.a.createElement(S.a,{xs:"12",sm:6,xl:3,key:e,className:"template-card"},r.a.createElement(te.a,null,r.a.createElement(te.a.Body,null,r.a.createElement(te.a.Title,null,t.name),r.a.createElement(te.a.Text,null,t.description),r.a.createElement("div",{className:"select-template-button-container"},r.a.createElement(ee.a,{to:"/jobs/new/".concat(e),className:"btn btn-primary"},"Choose")))))}))),r.a.createElement(K.a.Footer,null,r.a.createElement(X.a,{variant:"secondary",onClick:a},"Cancel")))},ie=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.componentDidMount=function(){return a.fetchJobs()},a.componentWillUnmount=function(){return a.pendingJobsRequest.cancel()},a.onUserWantToDeleteJob=function(e){return a.setState({jobToDelete:e})},a.onOpenJobView=function(e){return a.props.history.push("/jobs/".concat(e.id))},a.onOpenEditJob=function(e){return a.props.history.push("/jobs/".concat(e.id,"/edit"))},a.onUserConfirmDeletion=Object(O.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.jobToDelete,a.setState({jobs:null,jobToDelete:null}),e.next=4,$.deleteJob(t);case 4:return e.next=6,a.fetchJobs();case 6:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"fetchJobs",value:function(){var e=Object(O.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.pendingJobsRequest=A($.getJobs()),e.next=4,this.pendingJobsRequest.result;case 4:t=e.sent,this.setState({jobs:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({jobs:null,fetchError:!0});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(_.a,null,r.a.createElement(Z,{jobToDelete:this.state.jobToDelete,show:!!this.state.jobToDelete,onCancel:function(){return e.setState({jobToDelete:null})},onConfirmDeletion:this.onUserConfirmDeletion}),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement("h2",null,"List")),r.a.createElement(S.a,{className:"d-flex flex-row-reverse"},r.a.createElement(re,null))),r.a.createElement(V.a,null,!this.state.jobs&&!this.state.fetchError&&r.a.createElement(oe,null),!this.state.jobs&&this.state.fetchError&&r.a.createElement(se,null),this.state.jobs&&0===this.state.jobs.length&&r.a.createElement(ce,null),this.state.jobs&&this.state.jobs.length>0&&r.a.createElement(ue,{jobs:this.state.jobs,onUserWantToDeleteJob:this.onUserWantToDeleteJob,onOpenJobView:this.onOpenJobView,onOpenEditJob:this.onOpenEditJob})))}}]),t}(n.Component),oe=function(){return r.a.createElement(S.a,null,r.a.createElement("p",null,"Fetching jobs ..."))},ce=function(){return r.a.createElement(S.a,null,r.a.createElement("p",null,"You haven't created any jobs yet. Use the 'Add' button to create a new one"))},se=function(){return r.a.createElement(S.a,null,r.a.createElement(_.a,null,r.a.createElement(T.a,{variant:"danger"},"There's been an error while fetching the jobs")))},ue=function(e){var t=e.jobs,a=e.onUserWantToDeleteJob,n=e.onOpenJobView,l=e.onOpenEditJob;return r.a.createElement(S.a,null,r.a.createElement("h1",null,"Jobs"),r.a.createElement(J.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Platforms"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement(he,{job:e,key:e.id,onUserWantToDeleteJob:a,onOpenEditJob:l,onOpenJobView:n})}))))},me=function(e){return function(t){t.stopPropagation(),e()}},he=function(e){var t=e.job,a=e.onUserWantToDeleteJob,n=e.onOpenJobView,l=e.onOpenEditJob;return r.a.createElement("tr",{onClick:function(){return n(t)},className:"clickable-row"},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.data.name),r.a.createElement("td",null,t.data.description),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("a",{className:"icon-button",onClick:me(function(){return l(t)})},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("a",{className:"icon-button",onClick:me(function(){return a(t)})},r.a.createElement("i",{className:"fas fa-trash-alt"}))))},de=a(383),pe=a(381),be=a(382),Ee=a(173),fe=a(21),ge=a(82),ve=function(e){return"".concat(e/100)},je=function(e){return Math.floor(100*e)},Ce=(a(350),a(170)),ye=a.n(Ce),xe=(a(361),a(362),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleBlockDataChange=function(e){return function(t){var n=a.props.blocksList;n[e]=t,a.props.onChange(n)}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(te.a,null,r.a.createElement(te.a.Header,null,this.props.title),r.a.createElement(te.a.Body,null,r.a.createElement("div",{className:"blocks-container",ref:this.props.componentsContainerRef},this.props.blocksList.map(function(t,a){var n=e.props.blockDefinitionsMap[t.type],l=t.id||a;if(n){var i=n.Component;return r.a.createElement(i,{key:l,data:t,onChange:e.handleBlockDataChange(a),expandable:e.props.expandable})}return r.a.createElement(ke,{key:l,type:t.type})}))))}}]),t}(n.Component)),ke=function(e){var t=e.type;return r.a.createElement("p",null,"Can't render component of type ",t)},we=a(164),Oe=(a(363),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).toggleExpansion=function(){return a.setState(function(e){return{expanded:!e.expanded}},function(){return a.props.onToggleExpansion(a.state.expanded)})},a.state={expanded:e.expanded},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(te.a,{className:"block-card","data-block-type":this.props.type,"data-block-id":this.props.id},r.a.createElement(te.a.Header,null,this.props.expandable&&r.a.createElement("div",{onClick:this.toggleExpansion},r.a.createElement("div",null,!1===this.props.valid&&r.a.createElement("i",{className:"fas fa-exclamation-triangle"}),this.props.title),r.a.createElement("i",{className:"fas fa-caret-down ".concat(this.state.expanded?"expanded":"collapsed")})),!this.props.expandable&&this.props.title),r.a.createElement(we.a,{in:this.state.expanded},r.a.createElement("div",null,r.a.createElement(te.a.Body,null,this.props.children))))}}]),t}(n.Component)),_e=a(81),Ve=a(50),Se=function(e){return function(t){var a=t.target;e.setState(Object(Ve.a)({},a.name,a.value))}},Te=function(e){return function(t){var a=t.target;e.setState(Object(Ve.a)({},a.name,a.checked),function(){return Be(e)})}},Je=function(e){return function(t){var a=t.target;e.setState(Object(Ve.a)({},a.name,a.value),function(){return Be(e)})}},Ne=function(e){return function(){return Be(e)}},De=function(e){return function(t){return e.setState({expanded:t},function(){return e.props.onChange(e.state)})}},Be=function(e){return e.setState({valid:e.validate()},function(){return e.props.onChange(e.state)})},qe=function(e,t){var a=e.data;return Object(_e.a)({id:a.id,type:a.type,expanded:a.expanded||!1,valid:a.valid||!1},t)},Le={blockTypeName:"input_dynamic_text",Component:function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validate=function(){var e=a.state;return""!==e.csvVariable&&""!==e.csvTitleVariable&&!(e.highlightable&&(""===e.question||""===e.highlightedCsvVariable))},a.onChangeHighlightable=function(e){return a.setState({highlightable:e.target.checked},function(){return a.props.onChange(a.state)})},a.state=qe(e,{csvVariable:e.data.csvVariable||"",csvTitleVariable:e.data.csvTitleVariable||"",highlightable:e.data.highlightable||!1,question:e.data.question||"",highlightedCsvVariable:e.data.highlightedCsvVariable||""}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Oe,Object.assign({},this.state,{onToggleExpansion:De(this),title:"Input Dynamic Text",type:"input_dynamic_text",expandable:this.props.expandable}),r.a.createElement(V.a,null,r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"CSV Title Variable"),r.a.createElement(de.a.Control,{name:"csvTitleVariable",type:"text",value:this.state.csvTitleVariable,onChange:Se(this),onBlur:Ne(this)}))),r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"CSV Variable"),r.a.createElement(de.a.Control,{name:"csvVariable",type:"text",value:this.state.csvVariable,onChange:Se(this),onBlur:Ne(this)})))),r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Check,{type:"checkbox",name:"highlightable",label:"Enable text highlighting",checked:this.state.highlightable,onChange:this.onChangeHighlightable})),this.state.highlightable&&r.a.createElement(V.a,null,r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Question"),r.a.createElement(de.a.Control,{name:"question",type:"text",value:this.state.question,onChange:Se(this),onBlur:Ne(this)}))),r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Highlighted CSV Variable"),r.a.createElement(de.a.Control,{name:"highlightedCsvVariable",type:"text",value:this.state.highlightedCsvVariable,onChange:Se(this),onBlur:Ne(this)})))))}}]),t}(n.Component)},Ie={blockTypeName:"input_static_text",Component:function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validate=function(){return!0},a.handleEditorChange=function(e){return a.props.onChange(Object(_e.a)({},a.state,{text:e}))},a.state=qe(e,{text:e.data.text||"",valid:!0}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Oe,Object.assign({},this.state,{onToggleExpansion:De(this),title:"Input Static Text",type:"input_static_text",expandable:this.props.expandable}),r.a.createElement(de.a.Group,null,r.a.createElement(ge.a,{onEditorChange:this.handleEditorChange,initialValue:this.props.data.text,init:{menubar:!1}})))}}]),t}(n.Component)},Ge={blockTypeName:"output_open_question",Component:function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validate=function(){return""!==a.state.csvVariable&&""!==a.state.question},a.state=qe(e,{question:e.data.question||"",csvVariable:e.data.csvVariable||"",required:e.data.required||!1,size:e.data.size||"slim"}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Oe,Object.assign({onToggleExpansion:De(this)},this.state,{title:"Output Open Question",type:"output_open_question",expandable:this.props.expandable}),r.a.createElement(V.a,null,r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Question"),r.a.createElement(de.a.Control,{name:"question",type:"text",value:this.state.question,onChange:Se(this),onBlur:Ne(this)}))),r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"CSV Variable"),r.a.createElement(de.a.Control,{name:"csvVariable",type:"text",value:this.state.csvVariable,onChange:Se(this),onBlur:Ne(this)})))),r.a.createElement(V.a,null,r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Check,{type:"checkbox",name:"required",label:"Required",checked:this.state.required,onChange:Te(this)}))),r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Text field size"),r.a.createElement(de.a.Control,{as:"select",name:"size",onChange:Je(this),value:this.state.size},r.a.createElement("option",{value:"slim"},"Slim"),r.a.createElement("option",{value:"big"},"Big"))))))}}]),t}(n.Component)},Pe=[{label:"Multiple choice",value:"multiple_checkbox"},{label:"Single choice radio",value:"single_radio"},{label:"Single choice dropdown",value:"single_dropdown"}],Re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChoicesChanged=function(e){return a.setState({choices:e},function(){return a.props.onChange(a.state)})},a.validate=function(){var e=a.state;return""!==e.csvVariable&&""!==e.question&&0!==e.choices.length},a.state=qe(e,{question:e.data.question||"",choices:e.data.choices||[],csvVariable:e.data.csvVariable||"",required:e.data.required||!1,choice_type:e.data.choice_type||"multiple_checkbox"}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Oe,Object.assign({onToggleExpansion:De(this)},this.state,{title:"Output Choices",type:"output_choices",expandable:this.props.expandable}),r.a.createElement(de.a.Row,null,r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Question"),r.a.createElement(de.a.Control,{name:"question",type:"text",value:this.state.question,onChange:Se(this),onBlur:Ne(this)}))),r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"CSV Variable"),r.a.createElement(de.a.Control,{name:"csvVariable",type:"text",value:this.state.csvVariable,onChange:Se(this),onBlur:Ne(this)})))),r.a.createElement(de.a.Row,null,r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Check,{type:"checkbox",name:"required",label:"Required",checked:this.state.required,onChange:Te(this)}))),r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Choice type"),r.a.createElement(de.a.Control,{as:"select",name:"choice_type",onChange:Je(this),value:this.state.choice_type},Pe.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),r.a.createElement(Me,{choices:this.state.choices,onChange:this.onChoicesChanged}))}}]),t}(n.Component),Me=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={newLabel:"",newValue:""},a.onAddChoice=function(){var e=a.props.choices;e.push({label:a.state.newLabel,value:a.state.newValue}),a.setState({newLabel:"",newValue:""},function(){return a.props.onChange(e)})},a.onRemoveChoice=function(e){var t=a.props.choices;t.splice(e,1),a.props.onChange(t)},a.isNewChoiceValid=function(){return""!==a.state.newLabel.trim()&&""!==a.state.newValue.trim()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h5",null,"Choices"),r.a.createElement("hr",null),r.a.createElement(J.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Label"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.props.choices.map(function(t,a){return r.a.createElement("tr",{key:t.value},r.a.createElement("td",null,t.label),r.a.createElement("td",null,t.value),r.a.createElement("td",null,r.a.createElement("button",{className:"icon-button button-link",onClick:function(){return e.onRemoveChoice(a)}},r.a.createElement("i",{className:"fas fa-trash-alt"}))))}))),r.a.createElement(de.a.Row,null,r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Label"),r.a.createElement(de.a.Control,{name:"newLabel",type:"text",value:this.state.newLabel,onChange:Se(this)}))),r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Value"),r.a.createElement(de.a.Control,{name:"newValue",type:"text",value:this.state.newValue,onChange:Se(this)}))),r.a.createElement(S.a,{md:"12",className:""},r.a.createElement(X.a,{onClick:this.onAddChoice,disabled:!this.isNewChoiceValid()},"Add"))))}}]),t}(n.Component),Fe={blockTypeName:"output_choices",Component:Re},Ae=function(e){var t={};return e.forEach(function(e){return t[e.blockTypeName]=e}),t}([Le,Ie,{blockTypeName:"input_dynamic_image",Component:function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validate=function(){var e=a.state;return""!==e.csvVariable&&!(e.highlightable&&(""===e.question||""===e.highlightedCsvVariable))},a.onChangeHighlightable=function(e){return a.setState({highlightable:e.target.checked},function(){return a.props.onChange(a.state)})},a.state=qe(e,{csvVariable:e.data.csvVariable||"",highlightable:e.data.highlightable||!1,question:e.data.question||"",highlightedCsvVariable:e.data.highlightedCsvVariable||""}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Oe,Object.assign({},this.state,{onToggleExpansion:De(this),title:"Input Dynamic Image",type:"input_dynamic_image",expandable:this.props.expandable}),r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"CSV Variable"),r.a.createElement(de.a.Control,{name:"csvVariable",type:"text",value:this.state.csvVariable,onChange:Se(this),onBlur:Ne(this)})),r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Check,{type:"checkbox",name:"highlightable",label:"Enable image highlighting",checked:this.state.highlightable,onChange:this.onChangeHighlightable})),this.state.highlightable&&r.a.createElement(V.a,null,r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Question"),r.a.createElement(de.a.Control,{name:"question",type:"text",value:this.state.question,onChange:Se(this),onBlur:Ne(this)}))),r.a.createElement(S.a,{md:"12",lg:"6"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Highlighted CSV Variable"),r.a.createElement(de.a.Control,{name:"highlightedCsvVariable",type:"text",value:this.state.highlightedCsvVariable,onChange:Se(this),onBlur:Ne(this)})))))}}]),t}(n.Component)},Ge,Fe]),Ue=Object.keys(Ae).map(function(e){return{type:e}}),He=function(e,t){for(var a=0;a<t.children.length;a++)if(t.children[a]===e)return a;return-1},We=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.setupDragula()},a.setupDragula=function(){var e=a.toolsBlocksRef.current,t=a.designBlocksRef.current,n=[a.toolsBlocksRef.current,a.designBlocksRef.current];a.drake=ye()(n,{copy:function(t,a){return a===e},accepts:function(e,a){return a===t},removeOnSpill:!0}),a.drake.on("drop",function(n,r,l,i){if(r===t){var o=He(i,t);l===e?a.onBlockAdded(n,o):a.onBlockSorted(n,o)}}),a.drake.on("remove",function(e,t){t.appendChild(e);var n=e.getAttribute("data-block-id");a.removeBlockDataByIdAndNotify(n)})},a.onBlockAdded=function(e,t){a.assertNextSiblingIndexIsValidGivenInitialBlocks(t);var n=a.getNewBlockIndexGivenNextSiblingIndex(t),r=a.buildNewBlockDataGivenClonedElement(e);a.addBlockDataToTheDesignAndNotify(r,n),e.parentNode.removeChild(e)},a.onBlockSorted=function(e,t){a.assertNextSiblingIndexIsValidGivenInitialBlocks(t);var n=a.getMovedBlockIndex(e),r=a.getBlockIndexGivenNextSiblingIndex(t);a.swapBlockDataAndNotify(n,r)},a.assertNextSiblingIndexIsValidGivenInitialBlocks=function(e){if(0===e||e>a.props.initialBlocks.length)throw new Error("invalid nextSiblingIndex given the current blocks array")},a.getNewBlockIndexGivenNextSiblingIndex=function(e){return-1===e?a.props.initialBlocks.length:e-1},a.getBlockIndexGivenNextSiblingIndex=function(e){return-1===e?a.props.initialBlocks.length-1:e-1},a.buildNewBlockDataGivenClonedElement=function(e){return{type:e.getAttribute("data-block-type"),id:H()(),expanded:!0,valid:!0}},a.getMovedBlockIndex=function(e){var t=a.props.initialBlocks,n=e.getAttribute("data-block-id");return t.findIndex(function(e){return e.id===n})},a.addBlockDataToTheDesignAndNotify=function(e,t){var n=a.props.initialBlocks;n.splice(t,0,e),a.props.onChange(n)},a.swapBlockDataAndNotify=function(e,t){var n=a.props.initialBlocks,r=n[e];n[e]=n[t],n[t]=r,a.props.onChange(n)},a.removeBlockDataByIdAndNotify=function(e){var t=a.props.initialBlocks,n=t.findIndex(function(t){return t.id===e});t.splice(n,1),a.props.onChange(t)},a.toolsBlocksRef=r.a.createRef(),a.designBlocksRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(V.a,{className:"job-design-editor-container"},r.a.createElement(S.a,{md:"6",lg:"4"},r.a.createElement(xe,{componentsContainerRef:this.toolsBlocksRef,title:"Available blocks",blockDefinitionsMap:Ae,blocksList:Ue,expandable:!1})),r.a.createElement(S.a,{md:"6",lg:"8"},r.a.createElement(xe,{componentsContainerRef:this.designBlocksRef,title:"Your job design",blockDefinitionsMap:Ae,blocksList:this.props.initialBlocks,expandable:!0,onChange:function(t){return e.props.onChange(t)}})))}}]),t}(n.Component),ze=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e,t){if(a.state.designValid){var n=a.valuesToJobData(e);a.props.onSubmit(n,t)}},a.handleEditorChange=function(e){return a._instructions=e},a.valuesToJobData=function(e){return{name:e.name,description:e.description,num_votes:e.num_votes,max_votes:e.max_votes,reward:je(e.reward),items_csv:e.items_csv,items_gold_csv:e.items_gold_csv,instructions:a._instructions,design:a.state.design}},a.jobDataToValues=function(e){var t=e||{};return{name:t.name||"",description:t.description||"",num_votes:t.num_votes||3,max_votes:t.max_votes||10,reward:t.reward&&ve(t.reward)||.01,items_csv:t.items_csv||"",items_gold_csv:t.items_gold_csv||"",instructions:t.instructions||""}},a.validationSchema=fe.object().shape({name:fe.string().required("Name is required"),description:fe.string().required("Description is required"),num_votes:fe.number().required("Num votes must be a number").integer("Must be an integer").positive("Must be positive"),max_votes:fe.number().required("Max votes must be a number").integer("Must be an integer").positive("Must be positive"),reward:fe.number("").required("Reward must be a number").min(.1,"Must be greater than 0.1$").positive("Must be positive"),items_csv:fe.string().required("URL of CSV of items is required").url("Must be a valid URL"),items_gold_csv:fe.string().required("URL of CSV of gold items is required").url("Must be a valid URL"),instructions:fe.string(),html:fe.string(),css:fe.string(),js:fe.string()}),a.onDesignChanged=function(e){var t=a.isDesignValid();a.setState({designValid:t,design:e})},a.isDesignValid=function(){return null==a.state.design.find(function(e){return!e.valid})},a.state={design:e.jobData&&e.jobData.design||[]},a.state.designValid=a.isDesignValid(),a._instructions=e.jobData&&e.jobData.instructions||"",a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"job-form-container"},r.a.createElement(Ee.a,{initialValues:this.jobDataToValues(this.props.jobData),onSubmit:this.handleSubmit,validationSchema:this.validationSchema},function(t){var a=t.handleSubmit,n=t.handleChange,l=t.handleBlur,i=t.values,o=t.touched,c=t.errors,s=function(e){return o[e]&&!c[e]},u=function(e){return o[e]&&c[e]};return r.a.createElement(de.a,{onSubmit:a,noValidate:!0},r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Job name"),r.a.createElement(de.a.Control,{name:"name",type:"text",value:i.name,onChange:n,onBlur:l,placeholder:"Ex: classify category of papers",isInvalid:u("name"),isValid:s("name")}),r.a.createElement(de.a.Control.Feedback,{type:"invalid"},c.name)))),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Job description"),r.a.createElement(de.a.Control,{name:"description",value:i.description,as:"textarea",rows:"3",onChange:n,onBlur:l,isInvalid:u("description"),isValid:s("description")}),r.a.createElement(de.a.Control.Feedback,{type:"invalid"},c.description)))),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Path to CSV file"),r.a.createElement(de.a.Control,{name:"items_csv",type:"text",value:i.items_csv,onChange:n,onBlur:l,isInvalid:u("items_csv"),isValid:s("items_csv"),placeholder:"Ex: https://raw.githubusercontent.com/..."}),r.a.createElement(de.a.Control.Feedback,{type:"invalid"},c.items_csv)))),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Path to GOLD CSV file"),r.a.createElement(de.a.Control,{name:"items_gold_csv",type:"text",value:i.items_gold_csv,onChange:n,onBlur:l,isInvalid:u("items_gold_csv"),isValid:s("items_gold_csv"),placeholder:"Ex: https://raw.githubusercontent.com/..."}),r.a.createElement(de.a.Control.Feedback,{type:"invalid"},c.items_gold_csv)))),r.a.createElement(V.a,null,r.a.createElement(S.a,{xs:"12",sm:"4"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Votes for item"),r.a.createElement(de.a.Control,{type:"number",name:"num_votes",value:i.num_votes,onChange:n,isInvalid:u("num_votes"),isValid:s("num_votes")}),r.a.createElement(de.a.Control.Feedback,{type:"invalid"},c.num_votes))),r.a.createElement(S.a,{xs:"12",sm:"4"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Max votes per worker"),r.a.createElement(de.a.Control,{type:"number",step:"1",name:"max_votes",value:i.max_votes,onChange:n,isInvalid:u("max_votes"),isValid:s("max_votes")}),r.a.createElement(de.a.Control.Feedback,{type:"invalid"},c.max_votes))),r.a.createElement(S.a,{xs:"12",sm:"4"},r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Reward"),r.a.createElement(pe.a,null,r.a.createElement(pe.a.Prepend,null,r.a.createElement(pe.a.Text,null,"$")),r.a.createElement(de.a.Control,{type:"number",step:"0.01",name:"reward",value:i.reward,onChange:n,isInvalid:u("reward"),isValid:s("reward")}),r.a.createElement(de.a.Control.Feedback,{type:"invalid"},c.reward))))),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Instructions"),r.a.createElement(ge.a,{textareaName:"instructions",onEditorChange:e.handleEditorChange,initialValue:i.instructions,init:{menubar:!1}})))),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement(de.a.Label,null,"Design"),r.a.createElement(We,{initialBlocks:e.state.design,onChange:e.onDesignChanged}))),!e.state.designValid&&r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement(T.a,{variant:"danger"},"One or more blocks are not correctly configured."))),r.a.createElement(be.a,{className:"form-buttons"},e.props.cancelText&&r.a.createElement(X.a,{variant:"secondary",onClick:e.props.onCancel,className:"cancel-job-form"},e.props.cancelText),r.a.createElement(X.a,{variant:"primary",type:"submit",className:"submit-job-form"},e.props.submitText)))}))}}]),t}(n.Component),Ye=(a(364),function(e){var t=e.to,a=e.text;return r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement(ee.a,{to:t,className:"btn btn-outline-primary back-button"},r.a.createElement("i",{className:"fas fa-arrow-left"})," ",a)))}),Qe="blank",$e=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).buildJobStartingFromTemplate=function(e){return{name:"My ".concat(e.name),design:e.design}},a.handleJobSubmission=function(){var e=Object(O.a)(w.a.mark(function e(t,n){var r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.setSubmitting)(!0),e.prev=2,e.next=5,$.createJob({data:t});case 5:a.redirectToJobsList(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.onJobCreationFailed();case 11:r(!1);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a.onJobCreationFailed=function(){return a.setState({creationError:!0})},a.redirectToJobsList=function(){return a.props.history.push("/jobs")};var n=e.match.params.template_id||Qe,r=ne[n]||ne[Qe];return a.state={creationError:!1,jobData:a.buildJobStartingFromTemplate(r)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(_.a,null,r.a.createElement(Ye,{to:"/jobs",text:"Return to jobs list"}),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement("h1",null,"Create new job"))),this.state.creationError&&r.a.createElement(Ke,null),r.a.createElement(ze,{jobData:this.state.jobData,onSubmit:this.handleJobSubmission,onCancel:this.onCancel,submitText:"Create"}))}}]),t}(n.Component),Ke=function(){return r.a.createElement(S.a,null,r.a.createElement(T.a,{variant:"danger"},"There's been an error while creating the job"))},Xe=a(390),Ze=(a(365),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.openConfirmDialogForPlatform=function(e){return function(){return a.setState({publishOnPlatform:e})}},a.publish=Object(O.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.publishOnPlatform,a.onPublishing(),e.prev=2,e.next=5,$.publish(a.props.job,t);case 5:a.onJobPublished(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.onPublishError();case 11:case"end":return e.stop()}},e,null,[[2,8]])})),a.onPublishing=function(){return a.setState({publishOnPlatform:null,isPublishing:!0})},a.onJobPublished=function(){return a.setState({isPublishing:!1,published:!0})},a.onPublishError=function(){return a.setState({isPublishing:!1,publishError:!0,published:!1})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(_.a,{className:"publish-buttons"},r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement("h4",null,"Publish"))),r.a.createElement(et,{job:this.props.job,show:!!this.state.publishOnPlatform,onCancel:function(){return e.setState({publishOnPlatform:null})},onConfirm:this.publish}),r.a.createElement(tt,{job:this.props.job,show:this.state.isPublishing}),r.a.createElement(at,{job:this.props.job,show:this.state.published,onClose:function(){return e.setState({published:!1})}}),r.a.createElement(nt,{job:this.props.job,show:this.state.publishError,onClose:function(){return e.setState({publishError:!1})}}),r.a.createElement(V.a,null,r.a.createElement(S.a,{md:"4"},r.a.createElement(X.a,{className:"MTurk-publish",onClick:this.openConfirmDialogForPlatform("MTurk"),block:!0},"Amazon Mechanical Turk")),r.a.createElement(S.a,{md:"4"},r.a.createElement(X.a,{className:"F8-publish",onClick:this.openConfirmDialogForPlatform("F8"),block:!0},"Figure Eight")),r.a.createElement(S.a,{md:"4"},r.a.createElement(X.a,{className:"Toloka-publish",onClick:this.openConfirmDialogForPlatform("Toloka"),block:!0},"Yandex.Toloka"))))}}]),t}(n.Component)),et=function(e){var t=e.show,a=e.job,n=e.onCancel,l=e.onConfirm;return r.a.createElement(K.a,{show:t},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Title,null,"Publish job ",r.a.createElement("span",{className:"job-id"},"#",a.id))),r.a.createElement(K.a.Body,null,'Are you sure you want to publish "',r.a.createElement("strong",null,a.data.name),'"?'),r.a.createElement(K.a.Footer,null,r.a.createElement(X.a,{variant:"secondary",className:"cancel",onClick:n},"Cancel"),r.a.createElement(X.a,{variant:"primary",className:"confirm",onClick:l},"Publish")))},tt=function(e){var t=e.show,a=e.job;return r.a.createElement(K.a,{show:t},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Title,null,"Publishing Job #",a.id)),r.a.createElement(K.a.Body,null,"Please wait while Job #",a.id," is being published.",r.a.createElement(Xe.a,{animated:!0,now:100})))},at=function(e){var t=e.show,a=e.job,n=e.onClose;return r.a.createElement(K.a,{show:t},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Title,null,"Job #",a.id," published")),r.a.createElement(K.a.Body,null,'Job "',r.a.createElement("strong",null,a.data.name),'" published!'),r.a.createElement(K.a.Footer,null,r.a.createElement(X.a,{variant:"primary",onClick:n},"Close")))},nt=function(e){var t=e.show,a=e.job,n=e.onClose;return r.a.createElement(K.a,{show:t},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Title,null,"Something went wrong")),r.a.createElement(K.a.Body,null,"Something went wrong while publishing Job #",a.id,"."),r.a.createElement(K.a.Footer,null,r.a.createElement(X.a,{variant:"primary",onClick:n},"Close")))},rt=function(e){return e.props.history.push("/jobs")},lt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.componentDidMount=function(){return a.fetchJob()},a.componentWillUnmount=function(){return a.pendingJobRequest.cancel()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"fetchJob",value:function(){var e=Object(O.a)(w.a.mark(function e(){var t,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,this.pendingJobRequest=A($.getJob(t)),e.next=5,this.pendingJobRequest.result;case 5:a=e.sent,this.setState({job:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),rt(this);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.job?r.a.createElement(_.a,null,r.a.createElement(V.a,null,r.a.createElement(ot,{job:this.state.job})),r.a.createElement("hr",null),r.a.createElement(V.a,null,r.a.createElement(Ze,{job:this.state.job}))):r.a.createElement(it,null)}}]),t}(n.Component),it=function(){return r.a.createElement(_.a,null,r.a.createElement("p",null,"Fetching ..."))};function ot(e){var t=e.job;return r.a.createElement(_.a,null,r.a.createElement(Ye,{to:"/jobs",text:"Return to jobs list"}),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement("h2",null,"Job #",t.id)),r.a.createElement(S.a,{className:"d-flex flex-row-reverse"},r.a.createElement("div",null,r.a.createElement(ee.a,{to:"/jobs/".concat(t.id,"/edit"),className:"btn btn-primary"},"Edit")))),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement("h2",null,t.data.name))),r.a.createElement(V.a,null,r.a.createElement(S.a,{md:"3",lg:"2"},r.a.createElement("strong",null,"Description:")),r.a.createElement(S.a,null,t.data.description)),r.a.createElement(V.a,null,r.a.createElement(S.a,{md:"3",lg:"2"},r.a.createElement("strong",null,"Reward:")),r.a.createElement(S.a,null,ve(t.data.reward)," $")))}var ct=a(27),st=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.fetchJob()},a.fetchJob=Object(O.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.getJob(a.state.id);case 3:t=e.sent,a.setState({job:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),rt(Object(ct.a)(Object(ct.a)(a)));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),a.handleJobSubmission=function(){var e=Object(O.a)(w.a.mark(function e(t,n){var r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.setSubmitting)(!0),e.prev=2,e.next=5,$.updateJob({id:a.state.job.id,data:t});case 5:a.returnToJobPage(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.onUpdateJobFailed(e.t0);case 11:r(!1);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a.onCancel=function(){return a.returnToJobPage()},a.returnToJobPage=function(){return a.props.history.push("/jobs/".concat(a.state.job.id))},a.onUpdateJobFailed=function(e){return a.setState({updateError:e})},a.state={id:e.match.params.id},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(_.a,null,r.a.createElement(Ye,{to:"/jobs/".concat(this.state.id),text:"Cancel"}),r.a.createElement(V.a,null,r.a.createElement(S.a,null,r.a.createElement("h1",null,"Edit job ",this.state.job&&"#".concat(this.state.id)))),this.state.updateError&&r.a.createElement(mt,{error:this.state.updateError}),!this.state.job&&r.a.createElement(ut,null),this.state.job&&r.a.createElement(ze,{jobData:this.state.job.data,onSubmit:this.handleJobSubmission,onCancel:this.onCancel,submitText:"Save"}))}}]),t}(n.Component);function ut(){return r.a.createElement("p",null,"Fetching job...")}var mt=function(e){var t=e.error;return r.a.createElement(S.a,null,r.a.createElement(T.a,{variant:"danger"},t===z?"Validation of the Job failer. Please check all the data":"There's been an error while creating the job"))},ht=function(){return r.a.createElement(d.a,null,r.a.createElement(p.a,{path:"/jobs",exact:!0,component:ie}),r.a.createElement(p.a,{path:"/jobs/new/:template_id",component:$e}),r.a.createElement(p.a,{path:"/jobs/:id/edit",exact:!0,component:st}),r.a.createElement(p.a,{path:"/jobs/:id",component:lt}))},dt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sidebarOpen:!1},a.onToggleSidebar=function(){return a.setState(function(e){return{sidebarOpen:!e.sidebarOpen}})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement(v,{sidebarOpen:this.state.sidebarOpen}),r.a.createElement("div",{className:"content"},r.a.createElement(x,{onToggleSidebar:this.onToggleSidebar}),r.a.createElement(d.a,null,r.a.createElement(p.a,{path:"/jobs",component:ht}),r.a.createElement(p.a,{render:function(){return r.a.createElement(b.a,{to:"/jobs"})}})))))}}]),t}(n.Component),pt=(a(366),a(172)),bt=a.n(pt);a(367),a(368),a(370);bt.a.init({selector:"#tiny",plugins:["paste","link"]});var Et=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(dt,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[175,1,2]]]);
//# sourceMappingURL=main.32b4eab2.chunk.js.map