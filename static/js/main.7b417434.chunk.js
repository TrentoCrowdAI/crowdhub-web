(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,n){e.exports=n.p+"static/media/menu.7d88ba55.svg"},177:function(e,t,n){e.exports=n(367)},182:function(e,t,n){},185:function(e,t,n){},203:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){},354:function(e,t,n){},355:function(e,t,n){},358:function(e,t,n){},367:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(39),o=n.n(c),l=(n(182),n(10)),i=n(11),s=n(14),u=n(12),p=n(13),m=n(384),d=(n(183),n(184),n(369)),f=n(114),h=n.n(f),E=(n(185),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{id:"sidebar",className:this.props.sidebarOpen?"open":""},r.a.createElement("h2",{className:"app-title"},"Servant"),r.a.createElement(h.a,{as:"ul"},r.a.createElement(h.a.Item,{as:"li",className:"sidebar-link"},r.a.createElement(d.a,{to:"/projects"},"Projects"))))}}]),t}(a.Component)),j=n(165),b=n.n(j),v=n(382),w=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,{bg:"light",expand:"lg"},r.a.createElement("button",{className:"navbar-toggle button-link",onClick:this.props.onToggleSidebar},r.a.createElement("img",{src:b.a,className:"menu-icon",alt:"Toggle sidebar"})))}}]),t}(a.Component),k=n(386),O=n(176),y=n(383),g=n(7),C=n.n(g),x=n(9),D=n(372),P=n(385),S=n(373),W=n(167),T=n(374),N=n(115);function I(e,t){return U.apply(this,arguments)}function U(){return(U=Object(x.a)(C.a.mark(function e(t,n){var a,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:if(a=e.sent,_(a)){e.next=7;break}throw(r=new Error("HTTP response code not 200")).status=a.status,r;case 7:return e.next=9,a.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _=function(e){return e.status>=200&&e.status<=299};function A(e,t){return F.apply(this,arguments)}function F(){return(F=Object(x.a)(C.a.mark(function e(t,n){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e,t){return B.apply(this,arguments)}function B(){return(B=Object(x.a)(C.a.mark(function e(t,n){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e,t){return M.apply(this,arguments)}function M(){return(M=Object(x.a)(C.a.mark(function e(t,n){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(e){return L.apply(this,arguments)}function L(){return(L=Object(x.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(e){var t=!1;return{result:new Promise(function(n,a){e.then(function(e){t||n(e)}).catch(function(e){t||a(e)})}),cancel:function(){return t=!0}}}var G="https://crowdai-servant-api-dev.herokuapp.com",H="".concat(G,"/projects"),K={INVALID_WORKFLOW_DATA:"invalid_project_data"};function Y(e){return e.created_at=new Date(e.created_at),e.updated_at=new Date(e.updated_at),e.deleted_ad=new Date(e.deleted_ad),e}function $(e){return e}var z={getProjects:function(){var e=Object(x.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(H);case 2:return t=e.sent,e.abrupt("return",t.map(Y));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getProject:function(){var e=Object(x.a)(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("".concat(H,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",Y(n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(x.a)(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$(t),e.next=3,q("".concat(H),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateProject:function(){var e=Object(x.a)(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=$(t),e.next=4,R("".concat(H,"/").concat(t.id),n);case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(0),400!==e.t0.response){e.next=13;break}throw new Error(K.INVALID_PROJECT_DATA);case 13:throw e.t0;case 14:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(x.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("".concat(H,"/").concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Q=(n(203),function(e){var t=e.to,n=e.children;return r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(N.a,{to:t},n))}),X=function(e){var t=e.children;return r.a.createElement("li",{className:"breadcrumb-item"},t)},Z=n(371),ee=function(e){return function(t){t.stopPropagation(),e()}},te=n(380),ne=n(370),ae=function(e){var t=e.show,n=e.deleting,a=e.projectToDelete,c=e.onCancel,o=e.onConfirmDeletion;return r.a.createElement(te.a,{show:t},r.a.createElement(te.a.Header,null,r.a.createElement(te.a.Title,null,"Delete project ",r.a.createElement("span",{className:"project-id"},"#",t&&a.id))),r.a.createElement(te.a.Body,null,'Are you sure you want to delete "',r.a.createElement("strong",null,t&&a.data.name),'"?'),r.a.createElement(te.a.Footer,null,r.a.createElement(ne.a,{variant:"secondary",onClick:c,disabled:n},"Cancel"),r.a.createElement(ne.a,{variant:"danger",onClick:o,disabled:n},"Delete")))},re=function(e){var t=e.projects,n=e.onProjectDeleted;return r.a.createElement(W.a,null,r.a.createElement(Z.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement(ce,{project:e,key:e.id,onProjectDeleted:n})}))))},ce=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n.onUserWantToDeleteProject=function(){return n.setState({delete:!0})},n.onUserConfirmDeletion=Object(x.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.project,n.onDeletingProject(),e.next=4,z.deleteProject(t);case 4:n.props.onProjectDeleted(t);case 5:case"end":return e.stop()}},e)})),n.onUserCancelDeletion=function(){return n.setState({delete:!1})},n.onDeletingProject=function(){return n.setState({deleting:!0})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.project,t="".concat(lt,"/").concat(e.id),n="".concat(lt,"/").concat(e.id,"/edit");return r.a.createElement("tr",null,r.a.createElement(ae,{projectToDelete:e,show:this.state.delete,deleting:this.state.deleting,onCancel:this.onUserCancelDeletion,onConfirmDeletion:this.onUserConfirmDeletion}),r.a.createElement("td",null,r.a.createElement(N.a,{to:t},e.id)),r.a.createElement("td",null,r.a.createElement(N.a,{to:t},e.data.name)),r.a.createElement("td",null,e.data.description),r.a.createElement("td",null,r.a.createElement(N.a,{to:n,className:"icon-button"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("a",{className:"icon-button",onClick:ee(this.onUserWantToDeleteProject)},r.a.createElement("i",{className:"fas fa-trash-alt"}))))}}]),t}(a.Component),oe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n.componentDidMount=function(){return n.fetchProjects()},n.componentWillUnmount=function(){return n.pendingProjectsRequest.cancel()},n.fetchProjects=Object(x.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.pendingProjectsRequest=J(z.getProjects()),e.next=4,n.pendingProjectsRequest.result;case 4:t=e.sent,n.setState({projects:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n.setState({projects:null,fetchError:!0});case 11:case"end":return e.stop()}},e,null,[[0,8]])})),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(P.a,null,r.a.createElement(X,null,"Projects")),r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement("h3",null,"Projects list")),r.a.createElement(W.a,{className:"d-flex flex-row-reverse"},r.a.createElement(N.a,{className:"btn btn-primary",to:"".concat(lt,"/new")},"New"))),r.a.createElement(S.a,null,!this.state.projects&&!this.state.fetchError&&r.a.createElement(le,null),!this.state.projects&&this.state.fetchError&&r.a.createElement(se,null),this.state.projects&&0===this.state.projects.length&&r.a.createElement(ie,null),this.state.projects&&this.state.projects.length>0&&r.a.createElement(re,{projects:this.state.projects,onProjectDeleted:this.fetchProjects})))}}]),t}(a.Component),le=function(){return r.a.createElement(W.a,null,r.a.createElement("p",null,"Fetching projects ..."))},ie=function(){return r.a.createElement(W.a,null,r.a.createElement("p",null,"You haven't created any project yet. Use the 'Add' button to create a new one"))},se=function(){return r.a.createElement(W.a,null,r.a.createElement(D.a,null,r.a.createElement(T.a,{variant:"danger"},"There's been an error while fetching the projects")))},ue=n(381),pe=n(88),me=n(43),de=(n(349),n(173)),fe=n.n(de),he=n(174),Ee=n.n(he),je=(n(350),function(e){var t=e.to,n=e.text;return r.a.createElement(N.a,{to:t,className:"btn btn-outline-primary back-button"},r.a.createElement("i",{className:"fas fa-arrow-left"})," ",n)}),be=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n.handleSubmit=function(e,t){var a=n.valuesToProjectData(e);n.props.onSubmit(a,t)},n.valuesToProjectData=function(e){return{name:e.name,description:e.description}},n.projectDataToValues=function(e){var t=e||{};return{name:t.name||"",description:t.description||""}},n.validationSchema=me.object().shape({name:me.string().required("Name is required"),description:me.string().required("Description is required")}),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"project-form-container"},r.a.createElement(pe.a,{initialValues:this.projectDataToValues(this.props.projectData),onSubmit:this.handleSubmit,validationSchema:this.validationSchema},function(t){var n=t.handleSubmit,a=t.handleChange,c=t.handleBlur,o=t.values,l=t.touched,i=t.errors,s=function(e){return l[e]&&!i[e]},u=function(e){return l[e]&&i[e]};return r.a.createElement(ue.a,{onSubmit:n,noValidate:!0},r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"Project name"),r.a.createElement(ue.a.Control,{name:"name",type:"text",value:o.name,onChange:a,onBlur:c,placeholder:"Ex: classify category of papers",isInvalid:u("name"),isValid:s("name")}),r.a.createElement(ue.a.Control.Feedback,{type:"invalid"},i.name)))),r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"Project description"),r.a.createElement(ue.a.Control,{name:"description",value:o.description,as:"textarea",rows:"3",onChange:a,onBlur:c,isInvalid:u("description"),isValid:s("description")}),r.a.createElement(ue.a.Control.Feedback,{type:"invalid"},i.description)))),r.a.createElement(fe.a,{className:"form-buttons"},r.a.createElement(je,{to:e.props.cancelButtonUrlDestination||"/",text:e.props.cancelText}),r.a.createElement(Ee.a,{variant:"primary",type:"submit",className:"submit-project-form"},e.props.submitText)))}))}}]),t}(a.Component),ve=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={creationError:!1},n.handleProjectSubmission=function(){var e=Object(x.a)(C.a.mark(function e(t,a){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.setSubmitting)(!0),e.prev=2,e.next=5,z.createProject({data:t});case 5:n.redirectToProjectsList(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n.onProjectCreationFailed();case 11:r(!1);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,n){return e.apply(this,arguments)}}(),n.onProjectCreationFailed=function(){return n.setState({creationError:!0})},n.redirectToProjectsList=function(){return n.props.history.push(lt)},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(P.a,null,r.a.createElement(Q,{to:lt},"Projects"),r.a.createElement(X,null,"New")),r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement("h1",null,"Create new project"))),this.state.creationError&&r.a.createElement(we,null),r.a.createElement(be,{cancelButtonUrlDestination:lt,cancelText:"Back to Projects",onSubmit:this.handleProjectSubmission,submitText:"Create"}))}}]),t}(a.Component),we=function(){return r.a.createElement(W.a,null,r.a.createElement(T.a,{variant:"danger"},"There's been an error while creating the project"))},ke=n(379),Oe=n(378),ye=function(e){return e.props.history.push("".concat(lt))},ge="".concat(G,"/workflows");function Ce(e){return e.projectId=e.id_project,delete e.id_project,e.created_at=new Date(e.created_at),e.updated_at=new Date(e.updated_at),e.deleted_ad=new Date(e.deleted_ad),e}function xe(e){return e.id_project=e.projectId,delete e.projectId,e}var De={getWorkflowsOfProject:function(){var e=Object(x.a)(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("".concat(ge,"?project=").concat(t.id));case 2:return n=e.sent,e.abrupt("return",n.map(Ce));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createWorkflow:function(){var e=Object(x.a)(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=xe(t),e.next=3,q("".concat(ge),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),deleteWorkflow:function(){var e=Object(x.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("".concat(ge,"/").concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Pe=n(375),Se=(n(354),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showModal:!1},n.showCreateWorkflowModal=function(){return n.setState({showModal:!0})},n.onWorkflowCreated=function(){n.hideCreateWorkflowModal(),n.props.onWorkflowCreated()},n.hideCreateWorkflowModal=function(){return n.setState({showModal:!1})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(We,{show:this.state.showModal,onCancel:this.hideCreateWorkflowModal,projectId:this.props.projectId,onWorkflowCreated:this.onWorkflowCreated}),r.a.createElement(ne.a,{onClick:this.showCreateWorkflowModal},"Add workflow"))}}]),t}(a.Component)),We=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n.handleSubmit=function(){var e=Object(x.a)(C.a.mark(function e(t,a){var r,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.valuesToWorkspaceData(t),c={projectId:n.props.projectId,data:r},e.next=4,n.createNewWorkflow(c,a);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.valuesToWorkspaceData=function(e){return{name:e.name,description:e.description}},n.createNewWorkflow=function(){var e=Object(x.a)(C.a.mark(function e(t,a){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.setSubmitting)(!0),e.prev=2,e.next=5,De.createWorkflow(t);case 5:n.onWorkflowCreated(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n.onWorkflowCreationError();case 11:r(!1);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,n){return e.apply(this,arguments)}}(),n.onWorkflowCreated=function(){return n.props.onWorkflowCreated()},n.onWorkflowCreationError=function(){return n.setState({creationError:!0})},n.initialData={name:"",description:""},n.validationSchema=me.object().shape({name:me.string().required("Name is required"),description:me.string().required("Description is required")}),n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(te.a,{show:this.props.show},r.a.createElement(te.a.Header,null,r.a.createElement(te.a.Title,null,"Create new workflow")),r.a.createElement(pe.a,{initialValues:this.initialData,onSubmit:this.handleSubmit,validationSchema:this.validationSchema},function(t){var n=t.handleSubmit,a=t.handleChange,c=t.handleBlur,o=t.values,l=t.touched,i=t.errors,s=function(e){return l[e]&&!i[e]},u=function(e){return l[e]&&i[e]};return r.a.createElement(ue.a,{onSubmit:n,noValidate:!0},r.a.createElement(te.a.Body,null,e.state.creationError&&r.a.createElement(Te,null),r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"Workflow name name"),r.a.createElement(ue.a.Control,{name:"name",type:"text",value:o.name,onChange:a,onBlur:c,isInvalid:u("name"),isValid:s("name")}),r.a.createElement(ue.a.Control.Feedback,{type:"invalid"},i.name)))),r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"Workflow description"),r.a.createElement(ue.a.Control,{name:"description",value:o.description,as:"textarea",rows:"3",onChange:a,onBlur:c,isInvalid:u("description"),isValid:s("description")}),r.a.createElement(ue.a.Control.Feedback,{type:"invalid"},i.description))))),r.a.createElement(te.a.Footer,null,r.a.createElement(Pe.a,{className:"form-buttons"},r.a.createElement(ne.a,{variant:"secondary",onClick:e.props.onCancel},"Cancel"),r.a.createElement(ne.a,{type:"submit"},"Create"))))}))}}]),t}(a.Component),Te=function(){return r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement(T.a,{variant:"danger"},"There's been an error while creating the new workflow.")))},Ne=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n.onDeleteWorkflow=Object(x.a)(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.onDeleting(),e.prev=1,e.next=4,De.deleteWorkflow(n.props.workflowToDelete);case 4:n.onDeleted(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n.onDeleteFailed();case 10:n.onDeleteCompletedOrFailed();case 11:case"end":return e.stop()}},e,null,[[1,7]])})),n.onDeleting=function(){return n.setState({deleting:!0})},n.onDeleted=function(){return n.props.onWorkflowDeleted()},n.onDeleteFailed=function(){return n.setState({deleteError:!0})},n.onDeleteCompletedOrFailed=function(){return n.setState({deleting:!1})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.workflowToDelete,a=e.onCancel;return r.a.createElement(te.a,{show:t},r.a.createElement(te.a.Header,null,r.a.createElement(te.a.Title,null,"Delete worflow ",r.a.createElement("span",{className:"project-id"},t&&n.name))),r.a.createElement(te.a.Body,null,this.state.deleteError&&r.a.createElement(Ie,null),'Are you sure you want to delete "',r.a.createElement("strong",null,t&&n.data.name),'"?'),r.a.createElement(te.a.Footer,null,r.a.createElement(ne.a,{variant:"secondary",onClick:a,disabled:this.state.deleting,className:"cancel"},"Cancel"),r.a.createElement(ne.a,{variant:"danger",onClick:this.onDeleteWorkflow,disabled:this.state.deleting,className:"confirm"},"Delete")))}}]),t}(a.Component),Ie=function(){return r.a.createElement(T.a,{variant:"danger"},"There's been an error while deleting the workflow")},Ue=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Workflow dashboard")}}]),t}(a.Component),_e=function(){return r.a.createElement(k.a,null,r.a.createElement(O.a,{path:"".concat("/workflows","/:id"),exact:!0,component:Ue}))},Ae=function(e){var t=e.workflows,n=e.onWorkflowDeleted;return r.a.createElement(Z.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement(Fe,{workflow:e,key:e.id,onWorkflowDeleted:n})})))},Fe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n.onUserWantToDeleteWorkflow=function(){return n.setState({delete:!0})},n.onUserCancelDeletion=function(){return n.setState({delete:!1})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.workflow,t="".concat("/workflows","/").concat(e.id);return r.a.createElement("tr",null,r.a.createElement(Ne,{workflowToDelete:e,show:this.state.delete,onCancel:this.onUserCancelDeletion,onWorkflowDeleted:this.props.onWorkflowDeleted}),r.a.createElement("td",null,r.a.createElement(N.a,{to:t},e.id)),r.a.createElement("td",null,r.a.createElement(N.a,{to:t},e.data.name)),r.a.createElement("td",null,e.data.description),r.a.createElement("td",null,r.a.createElement("a",{className:"icon-button",onClick:ee(this.onUserWantToDeleteWorkflow)},r.a.createElement("i",{className:"fas fa-trash-alt"}))))}}]),t}(a.Component),qe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return n.fetchWorkflows()},n.componentWillUnmount=function(){return n.pendingWorkflowsRequest.cancel()},n.fetchWorkflows=Object(x.a)(C.a.mark(function e(){var t,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({workflows:null}),e.prev=1,t=De.getWorkflowsOfProject(n.props.project),n.pendingWorkflowsRequest=J(t),e.next=6,n.pendingWorkflowsRequest.result;case 6:a=e.sent,n.setState({workflows:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n.setState({workflows:null,fetchError:!0});case 13:case"end":return e.stop()}},e,null,[[1,10]])})),n.onWorkflowCreated=function(){return n.fetchWorkflows()},n.state={projectId:e.project.id},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement("h3",null,"Workflows")),r.a.createElement(W.a,{className:"d-flex flex-row-reverse"},r.a.createElement("div",null,r.a.createElement(Se,{projectId:this.state.projectId,onWorkflowCreated:this.onWorkflowCreated})))),r.a.createElement(S.a,null,r.a.createElement(W.a,null,!this.state.workflows&&r.a.createElement(Be,null),this.state.fetchError&&r.a.createElement(Re,null),this.state.workflows&&r.a.createElement(Ae,{workflows:this.state.workflows,onWorkflowDeleted:this.fetchWorkflows}))))}}]),t}(a.Component),Be=function(){return r.a.createElement("p",null,"Fetching workflows...")},Re=function(){return r.a.createElement(W.a,null,r.a.createElement(D.a,null,r.a.createElement(T.a,{variant:"danger"},"There's been an error while fetching the workflows of the project")))},Me=n(376),Ve=n(172),Le=n(377),Je="".concat(G,"/items");function Ge(e){return e.created_at=new Date(e.created_at),e.updated_at=new Date(e.updated_at),e.deleted_ad=new Date(e.deleted_ad),e}var He={importFromCsvUrl:function(){var e=Object(x.a)(C.a.mark(function e(t,n){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={id_project:t.id,csv_url:n},e.next=3,q(Je,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),getItemsOfProject:function(){var e=Object(x.a)(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("".concat(Je,"?project=").concat(t.id));case 2:return n=e.sent,e.abrupt("return",n.map(Ge));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Ke=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={csvUrl:""},n.onInputChange=function(e){return n.setState({csvUrl:e.target.value})},n.onImport=Object(x.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.onStartImport(),e.prev=1,e.next=4,He.importFromCsvUrl(n.props.project,n.state.csvUrl);case 4:t=e.sent,n.onImportCompleted(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n.onImportFailed();case 11:case"end":return e.stop()}},e,null,[[1,8]])})),n.onStartImport=function(){return n.setState({importing:!0,importCompleted:!1,importError:!1})},n.onImportCompleted=function(e){return n.setState({importing:!1,importCompleted:!0,csvUrl:"",importedItemsCount:e.length})},n.onImportFailed=function(){return n.setState({importing:!1,importError:!0})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement("h3",null,"Import new items"))),this.state.importError&&r.a.createElement(Ye,null),this.state.importCompleted&&r.a.createElement($e,{count:this.state.importedItemsCount}),r.a.createElement(Me.a,{className:"mb-3"},r.a.createElement(Ve.a,{placeholder:"https://raw.githubusercontent.com/...","aria-label":"URL of CSV file",onChange:this.onInputChange,disabled:this.state.importing,name:"csvUrl"}),r.a.createElement(Me.a.Append,null,r.a.createElement(ne.a,{variant:"outline-primary",value:this.state.csvUrl,disabled:this.state.csvUrl.length<=0||this.state.importing,onClick:this.onImport},"Import"))),this.state.importing&&r.a.createElement(ze,null))}}]),t}(a.Component),Ye=function(){return r.a.createElement(T.a,{variant:"danger"},"There's been an error while importing the items.")},$e=function(e){var t=e.count;return r.a.createElement(T.a,{variant:"success"},t," items imported successfully!")},ze=function(){return r.a.createElement(Le.a,{animated:!0,now:100})},Qe=(n(355),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.items,n=t.getColumnNames(e);return r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement(Z.a,{striped:!0,bordered:!0,hover:!0,className:"items-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),n.map(function(e){return r.a.createElement("th",{key:e},e)}))),r.a.createElement("tbody",null,e.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),n.map(function(t){return r.a.createElement("td",{key:"".concat(e.id,"-").concat(t)},e.data[t]||"")}))})))))}}]),t}(a.Component));Qe.getColumnNames=function(e){var t={};return e.map(function(e){return e.data}).map(Object.keys).forEach(function(e){return t[e]=!0}),Object.keys(t)};var Xe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){return n.fetchItems()},n.componentWillUnmount=function(){return n.pendingItemsRequest.cancel()},n.fetchItems=Object(x.a)(C.a.mark(function e(){var t,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.props.project,n.pendingItemsRequest=J(He.getItemsOfProject(t)),e.next=5,n.pendingItemsRequest.result;case 5:a=e.sent,n.setState({items:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n.setState({items:null,fetchError:!0});case 12:case"end":return e.stop()}},e,null,[[0,9]])})),n.state={},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.project;return r.a.createElement("div",null,r.a.createElement(Ke,{project:e}),r.a.createElement(D.a,null,r.a.createElement("h3",null,"Uploaded Items"),!this.state.items&&r.a.createElement(Ze,null),this.state.items&&r.a.createElement(Qe,{items:this.state.items})))}}]),t}(a.Component),Ze=function(){return r.a.createElement(D.a,null,r.a.createElement("p",null,"Loading items ..."))},et=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n.componentDidMount=function(){return n.fetchProject()},n.componentWillUnmount=function(){return n.pendingProjectRequest.cancel()},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"fetchProject",value:function(){var e=Object(x.a)(C.a.mark(function e(){var t,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,this.pendingProjectRequest=J(z.getProject(t)),e.next=5,this.pendingProjectRequest.result;case 5:n=e.sent,this.setState({project:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),ye(this);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(P.a,null,r.a.createElement(Q,{to:lt},"Projects"),r.a.createElement(X,null,this.state.project?this.state.project.data.name:"...")),!this.state.project&&r.a.createElement(tt,null),this.state.project&&r.a.createElement(S.a,null,r.a.createElement(nt,{project:this.state.project}),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("hr",null),r.a.createElement(ke.a,{defaultActiveKey:"workflow"},r.a.createElement(Oe.a,{eventKey:"workflow",title:"Workflows"},r.a.createElement(qe,{project:this.state.project})),r.a.createElement(Oe.a,{eventKey:"items",title:"Items"},r.a.createElement(Xe,{project:this.state.project}))))))}}]),t}(a.Component),tt=function(){return r.a.createElement("p",null,"Fetching ...")};function nt(e){var t=e.project;return r.a.createElement(D.a,null,r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement("h2",null,t.data.name)),r.a.createElement(W.a,{className:"d-flex flex-row-reverse"},r.a.createElement("div",null,r.a.createElement(N.a,{to:"".concat(lt,"/").concat(t.id,"/edit"),className:"btn btn-primary"},"Edit")))),r.a.createElement(S.a,null,r.a.createElement(W.a,null,t.data.description)))}var at=n(31),rt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},n.componentDidMount=function(){return n.fetchProject()},n.fetchProject=Object(x.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.getProject(n.state.id);case 3:t=e.sent,n.setState({project:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ye(Object(at.a)(Object(at.a)(n)));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.handleProjectSubmission=function(){var e=Object(x.a)(C.a.mark(function e(t,a){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.setSubmitting)(!0),e.prev=2,e.next=5,z.updateProject({id:n.state.project.id,data:t});case 5:n.returnToProjectPage(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n.onUpdateProjectFailed(e.t0);case 11:r(!1);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,n){return e.apply(this,arguments)}}(),n.onCancel=function(){return n.returnToProjectPage()},n.returnToProjectPage=function(){return n.props.history.push("".concat(lt,"/").concat(n.state.project.id))},n.onUpdateProjectFailed=function(e){return n.setState({updateError:e})},n.state={id:e.match.params.id},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(P.a,null,r.a.createElement(Q,{to:lt},"Projects"),r.a.createElement(Q,{to:"".concat(lt,"/").concat(this.props.match.params.id)},this.state.project?this.state.project.data.name:"..."),r.a.createElement(X,null,"Edit")),r.a.createElement(S.a,null,r.a.createElement(W.a,null,r.a.createElement("h4",null,"Edit project ",this.state.project&&this.state.project.data.name))),this.state.updateError&&r.a.createElement(ot,{error:this.state.updateError}),!this.state.project&&r.a.createElement(ct,null),this.state.project&&r.a.createElement(be,{projectData:this.state.project.data,onSubmit:this.handleProjectSubmission,submitText:"Save",cancelText:"Back to Project",cancelButtonUrlDestination:"".concat(lt,"/").concat(this.state.project.id)}))}}]),t}(a.Component);function ct(){return r.a.createElement("p",null,"Fetching Project...")}var ot=function(e){e.error;return r.a.createElement(W.a,null,r.a.createElement(T.a,{variant:"danger"},"There's been an updating the project."))},lt="/projects",it=function(){return r.a.createElement(k.a,null,r.a.createElement(O.a,{path:"".concat(lt),exact:!0,component:oe}),r.a.createElement(O.a,{path:"".concat(lt,"/new"),component:ve}),r.a.createElement(O.a,{path:"".concat(lt,"/:id/edit"),exact:!0,component:rt}),r.a.createElement(O.a,{path:"".concat(lt,"/:id"),component:et}))},st=function(){return r.a.createElement(k.a,null,r.a.createElement(O.a,{path:"".concat(lt),component:it}),r.a.createElement(O.a,{path:"".concat("/workflows"),component:_e}),r.a.createElement(O.a,{render:function(){return r.a.createElement(y.a,{to:"".concat(lt)})}}))},ut=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sidebarOpen:!1},n.onToggleSidebar=function(){return n.setState(function(e){return{sidebarOpen:!e.sidebarOpen}})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{basename:"/servant-web"},r.a.createElement("div",{className:"wrapper"},r.a.createElement(E,{sidebarOpen:this.state.sidebarOpen}),r.a.createElement("div",{className:"content"},r.a.createElement(w,{onToggleSidebar:this.onToggleSidebar}),r.a.createElement(st,null))))}}]),t}(a.Component),pt=(n(358),n(175)),mt=n.n(pt);n(362),n(363),n(365);mt.a.init({selector:"#tiny",plugins:["paste","link"]});var dt=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(ut,null)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[177,1,2]]]);
//# sourceMappingURL=main.7b417434.chunk.js.map